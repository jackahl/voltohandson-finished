{"ast":null,"code":"import { Transforms, createEditor } from 'slate'; // , Transforms\n\nimport { withHistory } from 'slate-history';\nimport { withReact, ReactEditor } from 'slate-react';\nimport config from '@plone/volto/registry';\nexport function setEditorContent(editor, block) {\n  Transforms.removeNodes(editor, {\n    at: [0]\n  }); // TODO: at: [] needs rethinking\n\n  Transforms.insertNodes(editor, block);\n}\nexport function makeEditor(options = {}) {\n  const {\n    extensions = []\n  } = options;\n  const {\n    slate\n  } = config.settings;\n  const defaultExtensions = slate.extensions;\n  const editor = withHistory(withReact(createEditor())); // TODO: also look for MIME Types in the files case\n\n  editor.dataTransferFormatsOrder = ['application/x-slate-fragment', 'text/html', 'files', 'text/plain'];\n  editor.dataTransferHandlers = {};\n  const plugins = [...defaultExtensions, ...extensions];\n\n  editor.isSelected = () => ReactEditor.isFocused(editor);\n\n  return plugins.reduce((acc, extender) => extender(acc), editor);\n}","map":{"version":3,"names":["Transforms","createEditor","withHistory","withReact","ReactEditor","config","setEditorContent","editor","block","removeNodes","at","insertNodes","makeEditor","options","extensions","slate","settings","defaultExtensions","dataTransferFormatsOrder","dataTransferHandlers","plugins","isSelected","isFocused","reduce","acc","extender"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/packages/volto-slate/src/utils/editor.js"],"sourcesContent":["import { Transforms, createEditor } from 'slate'; // , Transforms\nimport { withHistory } from 'slate-history';\nimport { withReact, ReactEditor } from 'slate-react';\n\nimport config from '@plone/volto/registry';\n\nexport function setEditorContent(editor, block) {\n  Transforms.removeNodes(editor, { at: [0] }); // TODO: at: [] needs rethinking\n  Transforms.insertNodes(editor, block);\n}\n\nexport function makeEditor(options = {}) {\n  const { extensions = [] } = options;\n  const { slate } = config.settings;\n  const defaultExtensions = slate.extensions;\n  const editor = withHistory(withReact(createEditor()));\n\n  // TODO: also look for MIME Types in the files case\n  editor.dataTransferFormatsOrder = [\n    'application/x-slate-fragment',\n    'text/html',\n    'files',\n    'text/plain',\n  ];\n  editor.dataTransferHandlers = {};\n\n  const plugins = [...defaultExtensions, ...extensions];\n  editor.isSelected = () => ReactEditor.isFocused(editor);\n\n  return plugins.reduce((acc, extender) => extender(acc), editor);\n}\n"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,YAArB,QAAyC,OAAzC,C,CAAkD;;AAClD,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,aAAvC;AAEA,OAAOC,MAAP,MAAmB,uBAAnB;AAEA,OAAO,SAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;EAC9CR,UAAU,CAACS,WAAX,CAAuBF,MAAvB,EAA+B;IAAEG,EAAE,EAAE,CAAC,CAAD;EAAN,CAA/B,EAD8C,CACD;;EAC7CV,UAAU,CAACW,WAAX,CAAuBJ,MAAvB,EAA+BC,KAA/B;AACD;AAED,OAAO,SAASI,UAAT,CAAoBC,OAAO,GAAG,EAA9B,EAAkC;EACvC,MAAM;IAAEC,UAAU,GAAG;EAAf,IAAsBD,OAA5B;EACA,MAAM;IAAEE;EAAF,IAAYV,MAAM,CAACW,QAAzB;EACA,MAAMC,iBAAiB,GAAGF,KAAK,CAACD,UAAhC;EACA,MAAMP,MAAM,GAAGL,WAAW,CAACC,SAAS,CAACF,YAAY,EAAb,CAAV,CAA1B,CAJuC,CAMvC;;EACAM,MAAM,CAACW,wBAAP,GAAkC,CAChC,8BADgC,EAEhC,WAFgC,EAGhC,OAHgC,EAIhC,YAJgC,CAAlC;EAMAX,MAAM,CAACY,oBAAP,GAA8B,EAA9B;EAEA,MAAMC,OAAO,GAAG,CAAC,GAAGH,iBAAJ,EAAuB,GAAGH,UAA1B,CAAhB;;EACAP,MAAM,CAACc,UAAP,GAAoB,MAAMjB,WAAW,CAACkB,SAAZ,CAAsBf,MAAtB,CAA1B;;EAEA,OAAOa,OAAO,CAACG,MAAR,CAAe,CAACC,GAAD,EAAMC,QAAN,KAAmBA,QAAQ,CAACD,GAAD,CAA1C,EAAiDjB,MAAjD,CAAP;AACD"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}