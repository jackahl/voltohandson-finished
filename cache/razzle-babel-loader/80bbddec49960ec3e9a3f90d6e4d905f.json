{"ast":null,"code":"import _defineProperty from \"/home/jakob/workspace/training-project/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _find from \"lodash/find\";\nvar _jsxFileName = \"/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/Edit/Edit.jsx\";\nvar __jsx = React.createElement;\n\n/**\n * Edit container.\n * @module components/manage/Edit/Edit\n */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Helmet } from '@plone/volto/helpers';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { asyncConnect } from '@plone/volto/helpers';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { Button, Grid, Menu } from 'semantic-ui-react';\nimport { Portal } from 'react-portal';\nimport qs from 'query-string';\nimport { toast } from 'react-toastify';\nimport { Forbidden, Form, Icon, Sidebar, Toast, Toolbar, Unauthorized, CompareLanguages, TranslationObject } from '@plone/volto/components';\nimport { updateContent, getContent, lockContent, unlockContent, getSchema, listActions } from '@plone/volto/actions';\nimport { getBaseUrl, hasBlocksData } from '@plone/volto/helpers';\nimport { preloadLazyLibs } from '@plone/volto/helpers/Loadable';\nimport saveSVG from '@plone/volto/icons/save.svg';\nimport clearSVG from '@plone/volto/icons/clear.svg';\nimport config from '@plone/volto/registry';\nconst messages = defineMessages({\n  edit: {\n    \"id\": \"Edit {title}\",\n    \"defaultMessage\": \"Edit {title}\"\n  },\n  save: {\n    \"id\": \"Save\",\n    \"defaultMessage\": \"Save\"\n  },\n  cancel: {\n    \"id\": \"Cancel\",\n    \"defaultMessage\": \"Cancel\"\n  },\n  error: {\n    \"id\": \"Error\",\n    \"defaultMessage\": \"Error\"\n  }\n});\n/**\n * Edit class.\n * @class Edit\n * @extends Component\n */\n\nclass Edit extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n\n  /**\n   * Default properties\n   * @property {Object} defaultProps Default properties.\n   * @static\n   */\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs EditComponent\n   */\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"form\", /*#__PURE__*/React.createRef());\n\n    _defineProperty(this, \"toolbarRef\", React.createRef);\n\n    this.state = {\n      visual: true,\n      isClient: false,\n      error: null,\n      formSelected: 'editForm',\n      newId: null\n    };\n    this.onCancel = this.onCancel.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n  /**\n   * Component did mount\n   * @method componentDidMount\n   * @returns {undefined}\n   */\n\n\n  componentDidMount() {\n    var _this$props$content;\n\n    if (this.props.getRequest.loaded && (_this$props$content = this.props.content) !== null && _this$props$content !== void 0 && _this$props$content['@type']) {\n      this.props.getSchema(this.props.content['@type'], getBaseUrl(this.props.pathname));\n    }\n\n    this.setState({\n      isClient: true,\n      comparingLanguage: null\n    });\n  }\n  /**\n   * Component will receive props\n   * @method componentWillReceiveProps\n   * @param {Object} nextProps Next properties\n   * @returns {undefined}\n   */\n\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    var _this$props, _this$props$content2;\n\n    if (this.props.getRequest.loading && nextProps.getRequest.loaded) {\n      if (nextProps.content['@type']) {\n        this.props.getSchema(nextProps.content['@type'], getBaseUrl(this.props.pathname));\n      }\n    }\n\n    if (this.props.schemaRequest.loading && nextProps.schemaRequest.loaded) {\n      if (!hasBlocksData(nextProps.schema.properties)) {\n        this.setState({\n          visual: false\n        });\n      }\n    } // Hack for make the Plone site editable by Volto Editor without checkings\n\n\n    if (((_this$props = this.props) === null || _this$props === void 0 ? void 0 : (_this$props$content2 = _this$props.content) === null || _this$props$content2 === void 0 ? void 0 : _this$props$content2['@type']) === 'Plone Site') {\n      this.setState({\n        visual: true\n      });\n    }\n\n    if (this.props.updateRequest.loading && nextProps.updateRequest.loaded) {\n      this.props.history.push(this.props.returnUrl || getBaseUrl(this.props.pathname));\n    }\n\n    if (this.props.updateRequest.loading && nextProps.updateRequest.error) {\n      var _nextProps$updateRequ, _nextProps$updateRequ2, _nextProps$updateRequ3, _nextProps$updateRequ4, _nextProps$updateRequ5, _nextProps$updateRequ6, _nextProps$updateRequ7, _nextProps$updateRequ8, _nextProps$updateRequ9, _DOMParser$parseFromS, _DOMParser$parseFromS2;\n\n      const message = ((_nextProps$updateRequ = nextProps.updateRequest.error) === null || _nextProps$updateRequ === void 0 ? void 0 : (_nextProps$updateRequ2 = _nextProps$updateRequ.response) === null || _nextProps$updateRequ2 === void 0 ? void 0 : (_nextProps$updateRequ3 = _nextProps$updateRequ2.body) === null || _nextProps$updateRequ3 === void 0 ? void 0 : (_nextProps$updateRequ4 = _nextProps$updateRequ3.error) === null || _nextProps$updateRequ4 === void 0 ? void 0 : _nextProps$updateRequ4.message) || ((_nextProps$updateRequ5 = nextProps.updateRequest.error) === null || _nextProps$updateRequ5 === void 0 ? void 0 : (_nextProps$updateRequ6 = _nextProps$updateRequ5.response) === null || _nextProps$updateRequ6 === void 0 ? void 0 : (_nextProps$updateRequ7 = _nextProps$updateRequ6.body) === null || _nextProps$updateRequ7 === void 0 ? void 0 : _nextProps$updateRequ7.message) || ((_nextProps$updateRequ8 = nextProps.updateRequest.error) === null || _nextProps$updateRequ8 === void 0 ? void 0 : (_nextProps$updateRequ9 = _nextProps$updateRequ8.response) === null || _nextProps$updateRequ9 === void 0 ? void 0 : _nextProps$updateRequ9.text) || '';\n      const error = ((_DOMParser$parseFromS = new DOMParser().parseFromString(message, 'text/html')) === null || _DOMParser$parseFromS === void 0 ? void 0 : (_DOMParser$parseFromS2 = _DOMParser$parseFromS.all[0]) === null || _DOMParser$parseFromS2 === void 0 ? void 0 : _DOMParser$parseFromS2.textContent) || message;\n      this.setState({\n        error: error\n      });\n      toast.error(__jsx(Toast, {\n        error: true,\n        title: this.props.intl.formatMessage(messages.error),\n        content: `${nextProps.updateRequest.error.status} ${error}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 9\n        }\n      }));\n    }\n\n    if (nextProps.compare_to && (this.state.compareTo && nextProps.compare_to['@id'] !== this.state.compareTo['@id'] || !this.state.compareTo)) {\n      this.setState({\n        compareTo: nextProps.compare_to\n      });\n    }\n  }\n  /**\n   * Component will unmount\n   * @method componentWillUnmount\n   * @returns {undefined}\n   */\n\n\n  componentWillUnmount() {\n    var _this$props$content3, _this$props$content3$;\n\n    if ((_this$props$content3 = this.props.content) !== null && _this$props$content3 !== void 0 && (_this$props$content3$ = _this$props$content3.lock) !== null && _this$props$content3$ !== void 0 && _this$props$content3$.locked) {\n      const baseUrl = getBaseUrl(this.props.pathname);\n      const {\n        newId\n      } = this.state; // Unlock the page, taking a possible id change into account\n\n      this.props.unlockContent(newId ? baseUrl.replace(/\\/[^/]*$/, '/' + newId) : baseUrl);\n    }\n  }\n  /**\n   * Submit handler\n   * @method onSubmit\n   * @param {object} data Form data.\n   * @returns {undefined}\n   */\n\n\n  onSubmit(data) {\n    var _this$props$content4, _this$props$content4$;\n\n    const lock_token = (_this$props$content4 = this.props.content) === null || _this$props$content4 === void 0 ? void 0 : (_this$props$content4$ = _this$props$content4.lock) === null || _this$props$content4$ === void 0 ? void 0 : _this$props$content4$.token;\n    const headers = lock_token ? {\n      'Lock-Token': lock_token\n    } : {}; // if the id has changed, remember it for unlock control\n\n    if ('id' in data) {\n      this.setState({\n        newId: data.id\n      });\n    }\n\n    this.props.updateContent(getBaseUrl(this.props.pathname), data, headers);\n  }\n  /**\n   * Cancel handler\n   * @method onCancel\n   * @returns {undefined}\n   */\n\n\n  onCancel() {\n    this.props.history.push(this.props.returnUrl || getBaseUrl(this.props.pathname));\n  }\n\n  setComparingLanguage(lang, content_id) {\n    this.setState({\n      comparingLanguage: lang\n    });\n    this.props.getContent(content_id, null, 'compare_to', null);\n  }\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    var _this$props$content5, _this$props2, _this$props2$schema, _this$props$objectAct, _this$props3, _this$props3$schema, _this$props$content6, _this$props$content$l, _this$props$content$l2;\n\n    const editPermission = _find(this.props.objectActions, {\n      id: 'edit'\n    });\n\n    const pageEdit = __jsx(Form, {\n      isEditForm: true,\n      ref: this.form,\n      schema: this.props.schema,\n      type: (_this$props$content5 = this.props.content) === null || _this$props$content5 === void 0 ? void 0 : _this$props$content5['@type'],\n      formData: this.props.content,\n      requestError: this.state.error,\n      onSubmit: this.onSubmit,\n      hideActions: true,\n      pathname: this.props.pathname,\n      visual: this.state.visual,\n      title: (_this$props2 = this.props) !== null && _this$props2 !== void 0 && (_this$props2$schema = _this$props2.schema) !== null && _this$props2$schema !== void 0 && _this$props2$schema.title ? this.props.intl.formatMessage(messages.edit, {\n        title: this.props.schema.title\n      }) : null,\n      loading: this.props.updateRequest.loading,\n      isFormSelected: this.state.formSelected === 'editForm',\n      onSelectForm: () => {\n        this.setState({\n          formSelected: 'editForm'\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 7\n      }\n    });\n\n    return __jsx(\"div\", {\n      id: \"page-edit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 7\n      }\n    }, ((_this$props$objectAct = this.props.objectActions) === null || _this$props$objectAct === void 0 ? void 0 : _this$props$objectAct.length) > 0 && __jsx(React.Fragment, null, editPermission && __jsx(React.Fragment, null, __jsx(Helmet, {\n      title: (_this$props3 = this.props) !== null && _this$props3 !== void 0 && (_this$props3$schema = _this$props3.schema) !== null && _this$props3$schema !== void 0 && _this$props3$schema.title ? this.props.intl.formatMessage(messages.edit, {\n        title: this.props.schema.title\n      }) : null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 17\n      }\n    }, ((_this$props$content6 = this.props.content) === null || _this$props$content6 === void 0 ? void 0 : _this$props$content6.language) && __jsx(\"html\", {\n      lang: this.props.content.language.token,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 21\n      }\n    })), this.state.comparingLanguage && this.state.compareTo ? __jsx(Grid, {\n      celled: \"internally\",\n      stackable: true,\n      columns: 2,\n      id: \"page-compare-translation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 19\n      }\n    }, __jsx(Grid.Column, {\n      className: \"source-object\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 21\n      }\n    }, __jsx(TranslationObject, {\n      translationObject: this.state.compareTo,\n      schema: this.props.schema,\n      pathname: this.props.pathname,\n      visual: this.state.visual,\n      isFormSelected: this.state.formSelected === 'translationObjectForm',\n      onSelectForm: () => {\n        this.setState({\n          formSelected: 'translationObjectForm'\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 23\n      }\n    })), __jsx(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \"new-translation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 23\n      }\n    }, __jsx(Menu, {\n      pointing: true,\n      secondary: true,\n      attached: true,\n      tabular: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 25\n      }\n    }, __jsx(Menu.Item, {\n      name: (_this$props$content$l = this.props.content.language) === null || _this$props$content$l === void 0 ? void 0 : _this$props$content$l.token.toUpperCase(),\n      active: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 27\n      }\n    }, (_this$props$content$l2 = this.props.content.language) === null || _this$props$content$l2 === void 0 ? void 0 : _this$props$content$l2.token.toUpperCase())), pageEdit))) : pageEdit), editPermission && this.state.visual && this.state.isClient && __jsx(Portal, {\n      node: document.getElementById('sidebar'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 15\n      }\n    }, __jsx(Sidebar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 17\n      }\n    }))), !editPermission && __jsx(React.Fragment, null, this.props.token ? __jsx(Forbidden, {\n      pathname: this.props.pathname,\n      staticContext: this.props.staticContext,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 15\n      }\n    }) : __jsx(Unauthorized, {\n      pathname: this.props.pathname,\n      staticContext: this.props.staticContext,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 15\n      }\n    })), this.state.isClient && __jsx(Portal, {\n      node: document.getElementById('toolbar'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 11\n      }\n    }, __jsx(Toolbar, {\n      pathname: this.props.pathname,\n      hideDefaultViewButtons: true,\n      inner: __jsx(React.Fragment, null, __jsx(Button, {\n        id: \"toolbar-save\",\n        className: \"save\",\n        \"aria-label\": this.props.intl.formatMessage(messages.save),\n        onClick: () => this.form.current.onSubmit(),\n        disabled: this.props.updateRequest.loading,\n        loading: this.props.updateRequest.loading,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 19\n        }\n      }, __jsx(Icon, {\n        name: saveSVG,\n        className: \"circled\",\n        size: \"30px\",\n        title: this.props.intl.formatMessage(messages.save),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 21\n        }\n      })), __jsx(Button, {\n        className: \"cancel\",\n        \"aria-label\": this.props.intl.formatMessage(messages.cancel),\n        onClick: () => this.onCancel(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 19\n        }\n      }, __jsx(Icon, {\n        name: clearSVG,\n        className: \"circled\",\n        size: \"30px\",\n        title: this.props.intl.formatMessage(messages.cancel),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 21\n        }\n      })), config.settings.isMultilingual && __jsx(CompareLanguages, {\n        content: this.props.content,\n        visual: this.state.visual,\n        setComparingLanguage: (lang, id) => {\n          this.setComparingLanguage(lang, id);\n        },\n        comparingLanguage: this.state.comparingLanguage,\n        pathname: this.props.location.pathname,\n        toolbarRef: this.toolbarRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 21\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\n_defineProperty(Edit, \"propTypes\", {\n  updateContent: PropTypes.func.isRequired,\n  getContent: PropTypes.func.isRequired,\n  getSchema: PropTypes.func.isRequired,\n  lockContent: PropTypes.func.isRequired,\n  unlockContent: PropTypes.func.isRequired,\n  updateRequest: PropTypes.shape({\n    loading: PropTypes.bool,\n    loaded: PropTypes.bool\n  }).isRequired,\n  schemaRequest: PropTypes.shape({\n    loading: PropTypes.bool,\n    loaded: PropTypes.bool\n  }).isRequired,\n  getRequest: PropTypes.shape({\n    loading: PropTypes.bool,\n    loaded: PropTypes.bool\n  }).isRequired,\n  pathname: PropTypes.string.isRequired,\n  returnUrl: PropTypes.string,\n  content: PropTypes.shape({\n    '@type': PropTypes.string\n  }),\n  schema: PropTypes.objectOf(PropTypes.any),\n  objectActions: PropTypes.array,\n  newId: PropTypes.string\n});\n\n_defineProperty(Edit, \"defaultProps\", {\n  schema: null,\n  content: null,\n  returnUrl: null\n});\n\nexport const __test__ = compose(injectIntl, connect((state, props) => {\n  var _state$content$subreq, _state$content$subreq2;\n\n  return {\n    objectActions: state.actions.actions.object,\n    token: state.userSession.token,\n    content: state.content.data,\n    compare_to: (_state$content$subreq = state.content.subrequests) === null || _state$content$subreq === void 0 ? void 0 : (_state$content$subreq2 = _state$content$subreq.compare_to) === null || _state$content$subreq2 === void 0 ? void 0 : _state$content$subreq2.data,\n    schema: state.schema.schema,\n    getRequest: state.content.get,\n    schemaRequest: state.schema,\n    updateRequest: state.content.update,\n    createRequest: state.content.create,\n    pathname: props.location.pathname,\n    returnUrl: qs.parse(props.location.search).return_url\n  };\n}, {\n  updateContent,\n  getContent,\n  getSchema,\n  lockContent,\n  unlockContent\n}))(Edit);\nexport default compose(injectIntl, asyncConnect([{\n  key: 'actions',\n  promise: async _ref => {\n    let {\n      location,\n      store: {\n        dispatch\n      }\n    } = _ref;\n    await dispatch(listActions(getBaseUrl(location.pathname)));\n  }\n}, {\n  key: 'content',\n  promise: async _ref2 => {\n    let {\n      location,\n      store: {\n        dispatch\n      }\n    } = _ref2;\n    const content = await dispatch(getContent(getBaseUrl(location.pathname)));\n\n    if ((content === null || content === void 0 ? void 0 : content.lock) !== undefined) {\n      await dispatch(lockContent(getBaseUrl(location.pathname)));\n    }\n\n    return content;\n  }\n}]), connect((state, props) => {\n  var _state$content$subreq3, _state$content$subreq4;\n\n  return {\n    objectActions: state.actions.actions.object,\n    token: state.userSession.token,\n    content: state.content.data,\n    compare_to: (_state$content$subreq3 = state.content.subrequests) === null || _state$content$subreq3 === void 0 ? void 0 : (_state$content$subreq4 = _state$content$subreq3.compare_to) === null || _state$content$subreq4 === void 0 ? void 0 : _state$content$subreq4.data,\n    schema: state.schema.schema,\n    getRequest: state.content.get,\n    schemaRequest: state.schema,\n    updateRequest: state.content.update,\n    pathname: props.location.pathname,\n    returnUrl: qs.parse(props.location.search).return_url\n  };\n}, {\n  updateContent,\n  getContent,\n  getSchema,\n  lockContent,\n  unlockContent\n}), preloadLazyLibs('cms'))(Edit);","map":{"version":3,"names":["React","Component","PropTypes","Helmet","connect","compose","asyncConnect","defineMessages","injectIntl","Button","Grid","Menu","Portal","qs","toast","Forbidden","Form","Icon","Sidebar","Toast","Toolbar","Unauthorized","CompareLanguages","TranslationObject","updateContent","getContent","lockContent","unlockContent","getSchema","listActions","getBaseUrl","hasBlocksData","preloadLazyLibs","saveSVG","clearSVG","config","messages","edit","save","cancel","error","Edit","constructor","props","createRef","state","visual","isClient","formSelected","newId","onCancel","bind","onSubmit","componentDidMount","getRequest","loaded","content","pathname","setState","comparingLanguage","UNSAFE_componentWillReceiveProps","nextProps","loading","schemaRequest","schema","properties","updateRequest","history","push","returnUrl","message","response","body","text","DOMParser","parseFromString","all","textContent","intl","formatMessage","status","compare_to","compareTo","componentWillUnmount","lock","locked","baseUrl","replace","data","lock_token","token","headers","id","setComparingLanguage","lang","content_id","render","editPermission","objectActions","pageEdit","form","title","length","language","toUpperCase","document","getElementById","staticContext","current","settings","isMultilingual","location","toolbarRef","func","isRequired","shape","bool","string","objectOf","any","array","__test__","actions","object","userSession","subrequests","get","update","createRequest","create","parse","search","return_url","key","promise","store","dispatch","undefined"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/Edit/Edit.jsx"],"sourcesContent":["/**\n * Edit container.\n * @module components/manage/Edit/Edit\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Helmet } from '@plone/volto/helpers';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { asyncConnect } from '@plone/volto/helpers';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { Button, Grid, Menu } from 'semantic-ui-react';\nimport { Portal } from 'react-portal';\nimport qs from 'query-string';\nimport { find } from 'lodash';\nimport { toast } from 'react-toastify';\n\nimport {\n  Forbidden,\n  Form,\n  Icon,\n  Sidebar,\n  Toast,\n  Toolbar,\n  Unauthorized,\n  CompareLanguages,\n  TranslationObject,\n} from '@plone/volto/components';\nimport {\n  updateContent,\n  getContent,\n  lockContent,\n  unlockContent,\n  getSchema,\n  listActions,\n} from '@plone/volto/actions';\nimport { getBaseUrl, hasBlocksData } from '@plone/volto/helpers';\nimport { preloadLazyLibs } from '@plone/volto/helpers/Loadable';\n\nimport saveSVG from '@plone/volto/icons/save.svg';\nimport clearSVG from '@plone/volto/icons/clear.svg';\n\nimport config from '@plone/volto/registry';\n\nconst messages = defineMessages({\n  edit: {\n    id: 'Edit {title}',\n    defaultMessage: 'Edit {title}',\n  },\n  save: {\n    id: 'Save',\n    defaultMessage: 'Save',\n  },\n  cancel: {\n    id: 'Cancel',\n    defaultMessage: 'Cancel',\n  },\n  error: {\n    id: 'Error',\n    defaultMessage: 'Error',\n  },\n});\n\n/**\n * Edit class.\n * @class Edit\n * @extends Component\n */\nclass Edit extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n  static propTypes = {\n    updateContent: PropTypes.func.isRequired,\n    getContent: PropTypes.func.isRequired,\n    getSchema: PropTypes.func.isRequired,\n    lockContent: PropTypes.func.isRequired,\n    unlockContent: PropTypes.func.isRequired,\n    updateRequest: PropTypes.shape({\n      loading: PropTypes.bool,\n      loaded: PropTypes.bool,\n    }).isRequired,\n    schemaRequest: PropTypes.shape({\n      loading: PropTypes.bool,\n      loaded: PropTypes.bool,\n    }).isRequired,\n    getRequest: PropTypes.shape({\n      loading: PropTypes.bool,\n      loaded: PropTypes.bool,\n    }).isRequired,\n    pathname: PropTypes.string.isRequired,\n    returnUrl: PropTypes.string,\n    content: PropTypes.shape({\n      '@type': PropTypes.string,\n    }),\n    schema: PropTypes.objectOf(PropTypes.any),\n    objectActions: PropTypes.array,\n    newId: PropTypes.string,\n  };\n\n  /**\n   * Default properties\n   * @property {Object} defaultProps Default properties.\n   * @static\n   */\n  static defaultProps = {\n    schema: null,\n    content: null,\n    returnUrl: null,\n  };\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs EditComponent\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      visual: true,\n      isClient: false,\n      error: null,\n      formSelected: 'editForm',\n      newId: null,\n    };\n    this.onCancel = this.onCancel.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  /**\n   * Component did mount\n   * @method componentDidMount\n   * @returns {undefined}\n   */\n  componentDidMount() {\n    if (this.props.getRequest.loaded && this.props.content?.['@type']) {\n      this.props.getSchema(\n        this.props.content['@type'],\n        getBaseUrl(this.props.pathname),\n      );\n    }\n    this.setState({\n      isClient: true,\n      comparingLanguage: null,\n    });\n  }\n\n  /**\n   * Component will receive props\n   * @method componentWillReceiveProps\n   * @param {Object} nextProps Next properties\n   * @returns {undefined}\n   */\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.props.getRequest.loading && nextProps.getRequest.loaded) {\n      if (nextProps.content['@type']) {\n        this.props.getSchema(\n          nextProps.content['@type'],\n          getBaseUrl(this.props.pathname),\n        );\n      }\n    }\n    if (this.props.schemaRequest.loading && nextProps.schemaRequest.loaded) {\n      if (!hasBlocksData(nextProps.schema.properties)) {\n        this.setState({\n          visual: false,\n        });\n      }\n    }\n    // Hack for make the Plone site editable by Volto Editor without checkings\n    if (this.props?.content?.['@type'] === 'Plone Site') {\n      this.setState({\n        visual: true,\n      });\n    }\n    if (this.props.updateRequest.loading && nextProps.updateRequest.loaded) {\n      this.props.history.push(\n        this.props.returnUrl || getBaseUrl(this.props.pathname),\n      );\n    }\n\n    if (this.props.updateRequest.loading && nextProps.updateRequest.error) {\n      const message =\n        nextProps.updateRequest.error?.response?.body?.error?.message ||\n        nextProps.updateRequest.error?.response?.body?.message ||\n        nextProps.updateRequest.error?.response?.text ||\n        '';\n\n      const error =\n        new DOMParser().parseFromString(message, 'text/html')?.all[0]\n          ?.textContent || message;\n\n      this.setState({ error: error });\n\n      toast.error(\n        <Toast\n          error\n          title={this.props.intl.formatMessage(messages.error)}\n          content={`${nextProps.updateRequest.error.status} ${error}`}\n        />,\n      );\n    }\n\n    if (\n      nextProps.compare_to &&\n      ((this.state.compareTo &&\n        nextProps.compare_to['@id'] !== this.state.compareTo['@id']) ||\n        !this.state.compareTo)\n    ) {\n      this.setState({ compareTo: nextProps.compare_to });\n    }\n  }\n\n  /**\n   * Component will unmount\n   * @method componentWillUnmount\n   * @returns {undefined}\n   */\n  componentWillUnmount() {\n    if (this.props.content?.lock?.locked) {\n      const baseUrl = getBaseUrl(this.props.pathname);\n      const { newId } = this.state;\n      // Unlock the page, taking a possible id change into account\n      this.props.unlockContent(\n        newId ? baseUrl.replace(/\\/[^/]*$/, '/' + newId) : baseUrl,\n      );\n    }\n  }\n\n  /**\n   * Submit handler\n   * @method onSubmit\n   * @param {object} data Form data.\n   * @returns {undefined}\n   */\n  onSubmit(data) {\n    const lock_token = this.props.content?.lock?.token;\n    const headers = lock_token ? { 'Lock-Token': lock_token } : {};\n    // if the id has changed, remember it for unlock control\n    if ('id' in data) {\n      this.setState({ newId: data.id });\n    }\n    this.props.updateContent(getBaseUrl(this.props.pathname), data, headers);\n  }\n\n  /**\n   * Cancel handler\n   * @method onCancel\n   * @returns {undefined}\n   */\n  onCancel() {\n    this.props.history.push(\n      this.props.returnUrl || getBaseUrl(this.props.pathname),\n    );\n  }\n\n  setComparingLanguage(lang, content_id) {\n    this.setState({ comparingLanguage: lang });\n    this.props.getContent(content_id, null, 'compare_to', null);\n  }\n\n  form = React.createRef();\n  toolbarRef = React.createRef;\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    const editPermission = find(this.props.objectActions, { id: 'edit' });\n\n    const pageEdit = (\n      <Form\n        isEditForm\n        ref={this.form}\n        schema={this.props.schema}\n        type={this.props.content?.['@type']}\n        formData={this.props.content}\n        requestError={this.state.error}\n        onSubmit={this.onSubmit}\n        hideActions\n        pathname={this.props.pathname}\n        visual={this.state.visual}\n        title={\n          this.props?.schema?.title\n            ? this.props.intl.formatMessage(messages.edit, {\n                title: this.props.schema.title,\n              })\n            : null\n        }\n        loading={this.props.updateRequest.loading}\n        isFormSelected={this.state.formSelected === 'editForm'}\n        onSelectForm={() => {\n          this.setState({ formSelected: 'editForm' });\n        }}\n      />\n    );\n\n    return (\n      <div id=\"page-edit\">\n        {this.props.objectActions?.length > 0 && (\n          <>\n            {editPermission && (\n              <>\n                <Helmet\n                  title={\n                    this.props?.schema?.title\n                      ? this.props.intl.formatMessage(messages.edit, {\n                          title: this.props.schema.title,\n                        })\n                      : null\n                  }\n                >\n                  {this.props.content?.language && (\n                    <html lang={this.props.content.language.token} />\n                  )}\n                </Helmet>\n\n                {this.state.comparingLanguage && this.state.compareTo ? (\n                  <Grid\n                    celled=\"internally\"\n                    stackable\n                    columns={2}\n                    id=\"page-compare-translation\"\n                  >\n                    <Grid.Column className=\"source-object\">\n                      <TranslationObject\n                        translationObject={this.state.compareTo}\n                        schema={this.props.schema}\n                        pathname={this.props.pathname}\n                        visual={this.state.visual}\n                        isFormSelected={\n                          this.state.formSelected === 'translationObjectForm'\n                        }\n                        onSelectForm={() => {\n                          this.setState({\n                            formSelected: 'translationObjectForm',\n                          });\n                        }}\n                      />\n                    </Grid.Column>\n                    <Grid.Column>\n                      <div className=\"new-translation\">\n                        <Menu pointing secondary attached tabular>\n                          <Menu.Item\n                            name={this.props.content.language?.token.toUpperCase()}\n                            active={true}\n                          >\n                            {this.props.content.language?.token.toUpperCase()}\n                          </Menu.Item>\n                        </Menu>\n\n                        {pageEdit}\n                      </div>\n                    </Grid.Column>\n                  </Grid>\n                ) : (\n                  pageEdit\n                )}\n              </>\n            )}\n\n            {editPermission && this.state.visual && this.state.isClient && (\n              <Portal node={document.getElementById('sidebar')}>\n                <Sidebar />\n              </Portal>\n            )}\n          </>\n        )}\n        {!editPermission && (\n          <>\n            {this.props.token ? (\n              <Forbidden\n                pathname={this.props.pathname}\n                staticContext={this.props.staticContext}\n              />\n            ) : (\n              <Unauthorized\n                pathname={this.props.pathname}\n                staticContext={this.props.staticContext}\n              />\n            )}\n          </>\n        )}\n        {this.state.isClient && (\n          <Portal node={document.getElementById('toolbar')}>\n            <Toolbar\n              pathname={this.props.pathname}\n              hideDefaultViewButtons\n              inner={\n                <>\n                  <Button\n                    id=\"toolbar-save\"\n                    className=\"save\"\n                    aria-label={this.props.intl.formatMessage(messages.save)}\n                    onClick={() => this.form.current.onSubmit()}\n                    disabled={this.props.updateRequest.loading}\n                    loading={this.props.updateRequest.loading}\n                  >\n                    <Icon\n                      name={saveSVG}\n                      className=\"circled\"\n                      size=\"30px\"\n                      title={this.props.intl.formatMessage(messages.save)}\n                    />\n                  </Button>\n                  <Button\n                    className=\"cancel\"\n                    aria-label={this.props.intl.formatMessage(messages.cancel)}\n                    onClick={() => this.onCancel()}\n                  >\n                    <Icon\n                      name={clearSVG}\n                      className=\"circled\"\n                      size=\"30px\"\n                      title={this.props.intl.formatMessage(messages.cancel)}\n                    />\n                  </Button>\n\n                  {config.settings.isMultilingual && (\n                    <CompareLanguages\n                      content={this.props.content}\n                      visual={this.state.visual}\n                      setComparingLanguage={(lang, id) => {\n                        this.setComparingLanguage(lang, id);\n                      }}\n                      comparingLanguage={this.state.comparingLanguage}\n                      pathname={this.props.location.pathname}\n                      toolbarRef={this.toolbarRef}\n                    />\n                  )}\n                </>\n              }\n            />\n          </Portal>\n        )}\n      </div>\n    );\n  }\n}\n\nexport const __test__ = compose(\n  injectIntl,\n  connect(\n    (state, props) => ({\n      objectActions: state.actions.actions.object,\n      token: state.userSession.token,\n      content: state.content.data,\n      compare_to: state.content.subrequests?.compare_to?.data,\n      schema: state.schema.schema,\n      getRequest: state.content.get,\n      schemaRequest: state.schema,\n      updateRequest: state.content.update,\n      createRequest: state.content.create,\n      pathname: props.location.pathname,\n      returnUrl: qs.parse(props.location.search).return_url,\n    }),\n    {\n      updateContent,\n      getContent,\n      getSchema,\n      lockContent,\n      unlockContent,\n    },\n  ),\n)(Edit);\n\nexport default compose(\n  injectIntl,\n  asyncConnect([\n    {\n      key: 'actions',\n      promise: async ({ location, store: { dispatch } }) => {\n        await dispatch(listActions(getBaseUrl(location.pathname)));\n      },\n    },\n    {\n      key: 'content',\n      promise: async ({ location, store: { dispatch } }) => {\n        const content = await dispatch(\n          getContent(getBaseUrl(location.pathname)),\n        );\n        if (content?.lock !== undefined) {\n          await dispatch(lockContent(getBaseUrl(location.pathname)));\n        }\n        return content;\n      },\n    },\n  ]),\n  connect(\n    (state, props) => ({\n      objectActions: state.actions.actions.object,\n      token: state.userSession.token,\n      content: state.content.data,\n      compare_to: state.content.subrequests?.compare_to?.data,\n      schema: state.schema.schema,\n      getRequest: state.content.get,\n      schemaRequest: state.schema,\n      updateRequest: state.content.update,\n      pathname: props.location.pathname,\n      returnUrl: qs.parse(props.location.search).return_url,\n    }),\n    {\n      updateContent,\n      getContent,\n      getSchema,\n      lockContent,\n      unlockContent,\n    },\n  ),\n  preloadLazyLibs('cms'),\n)(Edit);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[{"id":"Edit {title}","defaultMessage":"Edit {title}"},{"id":"Save","defaultMessage":"Save"},{"id":"Cancel","defaultMessage":"Cancel"},{"id":"Error","defaultMessage":"Error"}]}},"sourceType":"module"}