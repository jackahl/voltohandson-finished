{"ast":null,"code":"import express from 'express';\nimport { generateRobots } from '@plone/volto/helpers';\n/*\nrobots.txt - priority order:\n\n1) robots.txt in /public folder\n2) VOLTO_ROBOTSTXT var in .env\n3) default: plone robots.txt\n\n*/\n\nconst ploneRobots = function (req, res, next) {\n  generateRobots(req).then(robots => {\n    res.set('Content-Type', 'text/plain');\n    res.send(robots);\n  });\n};\n\nconst envRobots = function (req, res, next) {\n  res.type('text/plain');\n  res.send(process.env.VOLTO_ROBOTSTXT);\n};\n\nexport default function () {\n  const middleware = express.Router();\n\n  if (process.env.VOLTO_ROBOTSTXT) {\n    middleware.all('**/robots.txt', envRobots);\n  } else {\n    middleware.all('**/robots.txt', ploneRobots);\n  }\n\n  middleware.id = 'robots.txt';\n  return middleware;\n}","map":{"version":3,"names":["express","generateRobots","ploneRobots","req","res","next","then","robots","set","send","envRobots","type","process","env","VOLTO_ROBOTSTXT","middleware","Router","all","id"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/src/express-middleware/robotstxt.js"],"sourcesContent":["import express from 'express';\nimport { generateRobots } from '@plone/volto/helpers';\n\n/*\nrobots.txt - priority order:\n\n1) robots.txt in /public folder\n2) VOLTO_ROBOTSTXT var in .env\n3) default: plone robots.txt\n\n*/\n\nconst ploneRobots = function (req, res, next) {\n  generateRobots(req).then((robots) => {\n    res.set('Content-Type', 'text/plain');\n    res.send(robots);\n  });\n};\n\nconst envRobots = function (req, res, next) {\n  res.type('text/plain');\n  res.send(process.env.VOLTO_ROBOTSTXT);\n};\n\nexport default function () {\n  const middleware = express.Router();\n  if (process.env.VOLTO_ROBOTSTXT) {\n    middleware.all('**/robots.txt', envRobots);\n  } else {\n    middleware.all('**/robots.txt', ploneRobots);\n  }\n  middleware.id = 'robots.txt';\n  return middleware;\n}\n"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,SAApB;AACA,SAASC,cAAT,QAA+B,sBAA/B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,WAAW,GAAG,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;EAC5CJ,cAAc,CAACE,GAAD,CAAd,CAAoBG,IAApB,CAA0BC,MAAD,IAAY;IACnCH,GAAG,CAACI,GAAJ,CAAQ,cAAR,EAAwB,YAAxB;IACAJ,GAAG,CAACK,IAAJ,CAASF,MAAT;EACD,CAHD;AAID,CALD;;AAOA,MAAMG,SAAS,GAAG,UAAUP,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;EAC1CD,GAAG,CAACO,IAAJ,CAAS,YAAT;EACAP,GAAG,CAACK,IAAJ,CAASG,OAAO,CAACC,GAAR,CAAYC,eAArB;AACD,CAHD;;AAKA,eAAe,YAAY;EACzB,MAAMC,UAAU,GAAGf,OAAO,CAACgB,MAAR,EAAnB;;EACA,IAAIJ,OAAO,CAACC,GAAR,CAAYC,eAAhB,EAAiC;IAC/BC,UAAU,CAACE,GAAX,CAAe,eAAf,EAAgCP,SAAhC;EACD,CAFD,MAEO;IACLK,UAAU,CAACE,GAAX,CAAe,eAAf,EAAgCf,WAAhC;EACD;;EACDa,UAAU,CAACG,EAAX,GAAgB,YAAhB;EACA,OAAOH,UAAP;AACD"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}