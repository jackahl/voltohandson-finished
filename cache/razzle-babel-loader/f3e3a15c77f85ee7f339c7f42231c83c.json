{"ast":null,"code":"export default (_ref => {\n  let {\n    draftJs\n  } = _ref;\n  return {\n    createLinkAtSelection(editorState, url) {\n      const contentState = editorState.getCurrentContent().createEntity('LINK', 'MUTABLE', {\n        url\n      });\n      const entityKey = contentState.getLastCreatedEntityKey();\n      const withLink = draftJs.RichUtils.toggleLink(editorState, editorState.getSelection(), entityKey);\n      return draftJs.EditorState.forceSelection(withLink, editorState.getSelection());\n    },\n\n    removeLinkAtSelection(editorState) {\n      const selection = editorState.getSelection();\n      return draftJs.RichUtils.toggleLink(editorState, selection, null);\n    },\n\n    getCurrentEntityKey(editorState) {\n      const selection = editorState.getSelection();\n      const anchorKey = selection.getAnchorKey();\n      const contentState = editorState.getCurrentContent();\n      const anchorBlock = contentState.getBlockForKey(anchorKey);\n      const index = selection.isBackward ? selection.focusOffset : selection.anchorOffset;\n      return anchorBlock.getEntityAt(index);\n    },\n\n    getCurrentEntity(editorState) {\n      const contentState = editorState.getCurrentContent();\n      const entityKey = this.getCurrentEntityKey(editorState);\n      return entityKey ? contentState.getEntity(entityKey) : null;\n    },\n\n    hasEntity(editorState, entityType) {\n      const entity = this.getCurrentEntity(editorState);\n      return entity && entity.getType() === entityType;\n    }\n\n  };\n});","map":{"version":3,"names":["draftJs","createLinkAtSelection","editorState","url","contentState","getCurrentContent","createEntity","entityKey","getLastCreatedEntityKey","withLink","RichUtils","toggleLink","getSelection","EditorState","forceSelection","removeLinkAtSelection","selection","getCurrentEntityKey","anchorKey","getAnchorKey","anchorBlock","getBlockForKey","index","isBackward","focusOffset","anchorOffset","getEntityAt","getCurrentEntity","getEntity","hasEntity","entityType","entity","getType"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/AnchorPlugin/utils/EditorUtils.js"],"sourcesContent":["export default ({ draftJs }) => ({\n  createLinkAtSelection(editorState, url) {\n    const contentState = editorState\n      .getCurrentContent()\n      .createEntity('LINK', 'MUTABLE', { url });\n    const entityKey = contentState.getLastCreatedEntityKey();\n    const withLink = draftJs.RichUtils.toggleLink(\n      editorState,\n      editorState.getSelection(),\n      entityKey,\n    );\n    return draftJs.EditorState.forceSelection(\n      withLink,\n      editorState.getSelection(),\n    );\n  },\n\n  removeLinkAtSelection(editorState) {\n    const selection = editorState.getSelection();\n    return draftJs.RichUtils.toggleLink(editorState, selection, null);\n  },\n\n  getCurrentEntityKey(editorState) {\n    const selection = editorState.getSelection();\n    const anchorKey = selection.getAnchorKey();\n    const contentState = editorState.getCurrentContent();\n    const anchorBlock = contentState.getBlockForKey(anchorKey);\n    const index = selection.isBackward\n      ? selection.focusOffset\n      : selection.anchorOffset;\n\n    return anchorBlock.getEntityAt(index);\n  },\n\n  getCurrentEntity(editorState) {\n    const contentState = editorState.getCurrentContent();\n    const entityKey = this.getCurrentEntityKey(editorState);\n    return entityKey ? contentState.getEntity(entityKey) : null;\n  },\n\n  hasEntity(editorState, entityType) {\n    const entity = this.getCurrentEntity(editorState);\n    return entity && entity.getType() === entityType;\n  },\n});\n"],"mappings":"AAAA,gBAAe;EAAA,IAAC;IAAEA;EAAF,CAAD;EAAA,OAAkB;IAC/BC,qBAAqB,CAACC,WAAD,EAAcC,GAAd,EAAmB;MACtC,MAAMC,YAAY,GAAGF,WAAW,CAC7BG,iBADkB,GAElBC,YAFkB,CAEL,MAFK,EAEG,SAFH,EAEc;QAAEH;MAAF,CAFd,CAArB;MAGA,MAAMI,SAAS,GAAGH,YAAY,CAACI,uBAAb,EAAlB;MACA,MAAMC,QAAQ,GAAGT,OAAO,CAACU,SAAR,CAAkBC,UAAlB,CACfT,WADe,EAEfA,WAAW,CAACU,YAAZ,EAFe,EAGfL,SAHe,CAAjB;MAKA,OAAOP,OAAO,CAACa,WAAR,CAAoBC,cAApB,CACLL,QADK,EAELP,WAAW,CAACU,YAAZ,EAFK,CAAP;IAID,CAf8B;;IAiB/BG,qBAAqB,CAACb,WAAD,EAAc;MACjC,MAAMc,SAAS,GAAGd,WAAW,CAACU,YAAZ,EAAlB;MACA,OAAOZ,OAAO,CAACU,SAAR,CAAkBC,UAAlB,CAA6BT,WAA7B,EAA0Cc,SAA1C,EAAqD,IAArD,CAAP;IACD,CApB8B;;IAsB/BC,mBAAmB,CAACf,WAAD,EAAc;MAC/B,MAAMc,SAAS,GAAGd,WAAW,CAACU,YAAZ,EAAlB;MACA,MAAMM,SAAS,GAAGF,SAAS,CAACG,YAAV,EAAlB;MACA,MAAMf,YAAY,GAAGF,WAAW,CAACG,iBAAZ,EAArB;MACA,MAAMe,WAAW,GAAGhB,YAAY,CAACiB,cAAb,CAA4BH,SAA5B,CAApB;MACA,MAAMI,KAAK,GAAGN,SAAS,CAACO,UAAV,GACVP,SAAS,CAACQ,WADA,GAEVR,SAAS,CAACS,YAFd;MAIA,OAAOL,WAAW,CAACM,WAAZ,CAAwBJ,KAAxB,CAAP;IACD,CAhC8B;;IAkC/BK,gBAAgB,CAACzB,WAAD,EAAc;MAC5B,MAAME,YAAY,GAAGF,WAAW,CAACG,iBAAZ,EAArB;MACA,MAAME,SAAS,GAAG,KAAKU,mBAAL,CAAyBf,WAAzB,CAAlB;MACA,OAAOK,SAAS,GAAGH,YAAY,CAACwB,SAAb,CAAuBrB,SAAvB,CAAH,GAAuC,IAAvD;IACD,CAtC8B;;IAwC/BsB,SAAS,CAAC3B,WAAD,EAAc4B,UAAd,EAA0B;MACjC,MAAMC,MAAM,GAAG,KAAKJ,gBAAL,CAAsBzB,WAAtB,CAAf;MACA,OAAO6B,MAAM,IAAIA,MAAM,CAACC,OAAP,OAAqBF,UAAtC;IACD;;EA3C8B,CAAlB;AAAA,CAAf"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}