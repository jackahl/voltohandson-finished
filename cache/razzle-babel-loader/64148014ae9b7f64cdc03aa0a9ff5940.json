{"ast":null,"code":"var _jsxFileName = \"/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/Widgets/QuerystringWidget.jsx\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport { defineMessages, useIntl } from 'react-intl';\nimport ObjectWidget from '@plone/volto/components/manage/Widgets/ObjectWidget';\nconst messages = defineMessages({\n  Criteria: {\n    \"id\": \"Criteria\",\n    \"defaultMessage\": \"Criteria\"\n  },\n  depth: {\n    \"id\": \"Depth\",\n    \"defaultMessage\": \"Depth\"\n  },\n  SortOn: {\n    \"id\": \"Sort on\",\n    \"defaultMessage\": \"Sort on\"\n  },\n  reversedOrder: {\n    \"id\": \"Reversed order\",\n    \"defaultMessage\": \"Reversed order\"\n  },\n  limit: {\n    \"id\": \"Results limit\",\n    \"defaultMessage\": \"Results limit\"\n  },\n  itemBatchSize: {\n    \"id\": \"Item batch size\",\n    \"defaultMessage\": \"Item batch size\"\n  },\n  NoSelection: {\n    \"id\": \"No selection\",\n    \"defaultMessage\": \"No selection\"\n  }\n});\nexport const objectSchema = ({\n  intl,\n  isDisabled,\n  value\n}) => {\n  var _value$query;\n\n  return {\n    fieldsets: [{\n      id: 'default',\n      title: 'Default',\n      fields: ['query', ...((value === null || value === void 0 ? void 0 : (_value$query = value.query) === null || _value$query === void 0 ? void 0 : _value$query.filter(q => q.i === 'path').length) > 0 ? ['depth'] : []), 'sort_on', 'sort_order_boolean', 'limit', 'b_size']\n    }],\n    properties: {\n      query: {\n        title: intl.formatMessage(messages.Criteria),\n        widget: 'query'\n      },\n      depth: {\n        title: intl.formatMessage(messages.depth),\n        type: 'number'\n      },\n      sort_on: {\n        title: intl.formatMessage(messages.SortOn),\n        widget: 'query_sort_on',\n        isDisabled: isDisabled\n      },\n      sort_order_boolean: {\n        title: intl.formatMessage(messages.reversedOrder),\n        type: 'boolean',\n        isDisabled: isDisabled\n      },\n      limit: {\n        title: intl.formatMessage(messages.limit),\n        type: 'number',\n        isDisabled: isDisabled\n      },\n      b_size: {\n        title: intl.formatMessage(messages.itemBatchSize),\n        type: 'number',\n        isDisabled: isDisabled\n      }\n    },\n    required: []\n  };\n};\n\nconst QuerystringWidget = props => {\n  var _props$value, _props$value$query;\n\n  const {\n    block,\n    onChange,\n    schemaEnhancer\n  } = props;\n  const isDisabled = (_props$value = props.value) !== null && _props$value !== void 0 && (_props$value$query = _props$value.query) !== null && _props$value$query !== void 0 && _props$value$query.length ? false : true;\n  const intl = useIntl();\n  let schema = objectSchema(_objectSpread(_objectSpread({}, props), {}, {\n    intl,\n    isDisabled\n  }));\n  schema = schemaEnhancer ? schemaEnhancer(_objectSpread(_objectSpread({}, props), {}, {\n    intl,\n    schema\n  })) : schema;\n  return __jsx(\"div\", {\n    className: \"querystring-widget\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, __jsx(ObjectWidget, _extends({}, props, {\n    block: block,\n    schema: schema,\n    onChange: (id, value) => {\n      const adaptedValue = _objectSpread(_objectSpread({}, value), {}, {\n        sort_order: value.sort_order_boolean ? 'descending' : 'ascending'\n      });\n\n      onChange(id, adaptedValue);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  })));\n};\n\nexport default QuerystringWidget;","map":{"version":3,"names":["React","defineMessages","useIntl","ObjectWidget","messages","Criteria","depth","SortOn","reversedOrder","limit","itemBatchSize","NoSelection","objectSchema","intl","isDisabled","value","fieldsets","id","title","fields","query","filter","q","i","length","properties","formatMessage","widget","type","sort_on","sort_order_boolean","b_size","required","QuerystringWidget","props","block","onChange","schemaEnhancer","schema","adaptedValue","sort_order"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/Widgets/QuerystringWidget.jsx"],"sourcesContent":["import React from 'react';\nimport { defineMessages, useIntl } from 'react-intl';\nimport ObjectWidget from '@plone/volto/components/manage/Widgets/ObjectWidget';\n\nconst messages = defineMessages({\n  Criteria: {\n    id: 'Criteria',\n    defaultMessage: 'Criteria',\n  },\n  depth: {\n    id: 'Depth',\n    defaultMessage: 'Depth',\n  },\n  SortOn: {\n    id: 'Sort on',\n    defaultMessage: 'Sort on',\n  },\n  reversedOrder: {\n    id: 'Reversed order',\n    defaultMessage: 'Reversed order',\n  },\n  limit: {\n    id: 'Results limit',\n    defaultMessage: 'Results limit',\n  },\n  itemBatchSize: {\n    id: 'Item batch size',\n    defaultMessage: 'Item batch size',\n  },\n  NoSelection: {\n    id: 'No selection',\n    defaultMessage: 'No selection',\n  },\n});\n\nexport const objectSchema = ({ intl, isDisabled, value }) => ({\n  fieldsets: [\n    {\n      id: 'default',\n      title: 'Default',\n      fields: [\n        'query',\n        ...(value?.query?.filter((q) => q.i === 'path').length > 0\n          ? ['depth']\n          : []),\n        'sort_on',\n        'sort_order_boolean',\n        'limit',\n        'b_size',\n      ],\n    },\n  ],\n  properties: {\n    query: {\n      title: intl.formatMessage(messages.Criteria),\n      widget: 'query',\n    },\n    depth: {\n      title: intl.formatMessage(messages.depth),\n      type: 'number',\n    },\n    sort_on: {\n      title: intl.formatMessage(messages.SortOn),\n      widget: 'query_sort_on',\n      isDisabled: isDisabled,\n    },\n    sort_order_boolean: {\n      title: intl.formatMessage(messages.reversedOrder),\n      type: 'boolean',\n      isDisabled: isDisabled,\n    },\n    limit: {\n      title: intl.formatMessage(messages.limit),\n      type: 'number',\n      isDisabled: isDisabled,\n    },\n    b_size: {\n      title: intl.formatMessage(messages.itemBatchSize),\n      type: 'number',\n      isDisabled: isDisabled,\n    },\n  },\n  required: [],\n});\n\nconst QuerystringWidget = (props) => {\n  const { block, onChange, schemaEnhancer } = props;\n  const isDisabled = props.value?.query?.length ? false : true;\n\n  const intl = useIntl();\n  let schema = objectSchema({ ...props, intl, isDisabled });\n  schema = schemaEnhancer ? schemaEnhancer({ ...props, intl, schema }) : schema;\n\n  return (\n    <div className=\"querystring-widget\">\n      <ObjectWidget\n        {...props}\n        block={block}\n        schema={schema}\n        onChange={(id, value) => {\n          const adaptedValue = {\n            ...value,\n            sort_order: value.sort_order_boolean ? 'descending' : 'ascending',\n          };\n          onChange(id, adaptedValue);\n        }}\n      />\n    </div>\n  );\n};\nexport default QuerystringWidget;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[{"id":"Criteria","defaultMessage":"Criteria"},{"id":"Depth","defaultMessage":"Depth"},{"id":"Sort on","defaultMessage":"Sort on"},{"id":"Reversed order","defaultMessage":"Reversed order"},{"id":"Results limit","defaultMessage":"Results limit"},{"id":"Item batch size","defaultMessage":"Item batch size"},{"id":"No selection","defaultMessage":"No selection"}]}},"sourceType":"module"}