{"ast":null,"code":"var _jsxFileName = \"/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/AnchorPlugin/components/LinkButton/index.jsx\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport EditorUtils from '../../utils/EditorUtils';\nimport { injectLazyLibs } from '@plone/volto/helpers/Loadable/Loadable';\nimport AddLinkForm from '@plone/volto/components/manage/AnchorPlugin/components/LinkButton/AddLinkForm';\nimport Icon from '@plone/volto/components/theme/Icon/Icon';\nimport linkSVG from '@plone/volto/icons/link.svg';\nimport unlinkSVG from '@plone/volto/icons/unlink.svg'; // import unionClassNames from 'union-class-names';\n//import EditorUtils from 'draft-js-plugins-utils';\n\n/**\n * Add link form class.\n * @class LinkButton\n * @extends Component\n */\n\nclass LinkButton extends Component {\n  constructor(_props) {\n    super(_props);\n\n    _defineProperty(this, \"onMouseDown\", event => {\n      event.preventDefault();\n    });\n\n    _defineProperty(this, \"onAddLinkClick\", e => {\n      var _this$EditorUtils$get, _this$EditorUtils$get2;\n\n      e.preventDefault();\n      e.stopPropagation();\n      const {\n        ownTheme,\n        placeholder,\n        onOverrideContent\n      } = this.props;\n      const link = (_this$EditorUtils$get = this.EditorUtils.getCurrentEntity(this.props.getEditorState())) === null || _this$EditorUtils$get === void 0 ? void 0 : (_this$EditorUtils$get2 = _this$EditorUtils$get.getData()) === null || _this$EditorUtils$get2 === void 0 ? void 0 : _this$EditorUtils$get2.url;\n\n      const content = props => __jsx(AddLinkForm, _extends({}, props, {\n        placeholder: placeholder,\n        theme: ownTheme,\n        block: \"draft-js\",\n        data: {\n          url: link || ''\n        },\n        onChangeBlock: () => {},\n        onClear: () => {\n          this.props.setEditorState(this.DraftEditorUtils.removeLinkAtSelection(this.props.getEditorState()));\n        },\n        onChangeValue: url => {\n          this.props.setEditorState(this.DraftEditorUtils.createLinkAtSelection(this.props.getEditorState(), url));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 7\n        }\n      }));\n\n      onOverrideContent(content);\n    });\n\n    this.DraftEditorUtils = _props.draftJsPluginsUtils.default;\n    this.EditorUtils = EditorUtils(_props);\n  }\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    const {\n      theme\n    } = this.props;\n    const hasLinkSelected = this.EditorUtils.hasEntity(this.props.getEditorState(), 'LINK');\n    const className = hasLinkSelected ? cx(theme.button, theme.active) : theme.button;\n    return __jsx(\"div\", {\n      className: theme.buttonWrapper,\n      onMouseDown: this.onMouseDown,\n      role: \"presentation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }\n    }, __jsx(\"button\", {\n      className: className,\n      onClick: this.onAddLinkClick // hasLinkSelected\n      //   ? () =>\n      //       onRemoveLinkAtSelection(\n      //         this.props.setEditorState,\n      //         this.props.getEditorState,\n      //       )\n      //   : this.onAddLinkClick\n      ,\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    }, !hasLinkSelected ? __jsx(Icon, {\n      name: linkSVG,\n      size: \"24px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }) : __jsx(Icon, {\n      name: unlinkSVG,\n      size: \"24px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\n_defineProperty(LinkButton, \"propTypes\", {\n  placeholder: PropTypes.string,\n  theme: PropTypes.shape({}).isRequired,\n  ownTheme: PropTypes.shape({}).isRequired,\n  onRemoveLinkAtSelection: PropTypes.func.isRequired,\n  onOverrideContent: PropTypes.func.isRequired\n});\n\n_defineProperty(LinkButton, \"defaultProps\", {\n  placeholder: ''\n});\n\nexport default injectLazyLibs(['draftJs', 'draftJsPluginsUtils'])(LinkButton);","map":{"version":3,"names":["React","Component","PropTypes","cx","EditorUtils","injectLazyLibs","AddLinkForm","Icon","linkSVG","unlinkSVG","LinkButton","constructor","props","event","preventDefault","e","stopPropagation","ownTheme","placeholder","onOverrideContent","link","getCurrentEntity","getEditorState","getData","url","content","setEditorState","DraftEditorUtils","removeLinkAtSelection","createLinkAtSelection","draftJsPluginsUtils","default","render","theme","hasLinkSelected","hasEntity","className","button","active","buttonWrapper","onMouseDown","onAddLinkClick","string","shape","isRequired","onRemoveLinkAtSelection","func"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/AnchorPlugin/components/LinkButton/index.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport EditorUtils from '../../utils/EditorUtils';\nimport { injectLazyLibs } from '@plone/volto/helpers/Loadable/Loadable';\nimport AddLinkForm from '@plone/volto/components/manage/AnchorPlugin/components/LinkButton/AddLinkForm';\nimport Icon from '@plone/volto/components/theme/Icon/Icon';\n\nimport linkSVG from '@plone/volto/icons/link.svg';\nimport unlinkSVG from '@plone/volto/icons/unlink.svg';\n\n// import unionClassNames from 'union-class-names';\n//import EditorUtils from 'draft-js-plugins-utils';\n\n/**\n * Add link form class.\n * @class LinkButton\n * @extends Component\n */\nclass LinkButton extends Component {\n  static propTypes = {\n    placeholder: PropTypes.string,\n    theme: PropTypes.shape({}).isRequired,\n    ownTheme: PropTypes.shape({}).isRequired,\n    onRemoveLinkAtSelection: PropTypes.func.isRequired,\n    onOverrideContent: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.DraftEditorUtils = props.draftJsPluginsUtils.default;\n    this.EditorUtils = EditorUtils(props);\n  }\n\n  static defaultProps = {\n    placeholder: '',\n  };\n\n  onMouseDown = (event) => {\n    event.preventDefault();\n  };\n\n  onAddLinkClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { ownTheme, placeholder, onOverrideContent } = this.props;\n    const link = this.EditorUtils.getCurrentEntity(\n      this.props.getEditorState(),\n    )?.getData()?.url;\n\n    const content = (props) => (\n      <AddLinkForm\n        {...props}\n        placeholder={placeholder}\n        theme={ownTheme}\n        block=\"draft-js\"\n        data={{ url: link || '' }}\n        onChangeBlock={() => {}}\n        onClear={() => {\n          this.props.setEditorState(\n            this.DraftEditorUtils.removeLinkAtSelection(\n              this.props.getEditorState(),\n            ),\n          );\n        }}\n        onChangeValue={(url) => {\n          this.props.setEditorState(\n            this.DraftEditorUtils.createLinkAtSelection(\n              this.props.getEditorState(),\n              url,\n            ),\n          );\n        }}\n      />\n    );\n    onOverrideContent(content);\n  };\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    const { theme } = this.props;\n    const hasLinkSelected = this.EditorUtils.hasEntity(\n      this.props.getEditorState(),\n      'LINK',\n    );\n    const className = hasLinkSelected\n      ? cx(theme.button, theme.active)\n      : theme.button;\n\n    return (\n      <div\n        className={theme.buttonWrapper}\n        onMouseDown={this.onMouseDown}\n        role=\"presentation\"\n      >\n        <button\n          className={className}\n          onClick={\n            this.onAddLinkClick\n            // hasLinkSelected\n            //   ? () =>\n            //       onRemoveLinkAtSelection(\n            //         this.props.setEditorState,\n            //         this.props.getEditorState,\n            //       )\n            //   : this.onAddLinkClick\n          }\n          type=\"button\"\n        >\n          {!hasLinkSelected ? (\n            <Icon name={linkSVG} size=\"24px\" />\n          ) : (\n            <Icon name={unlinkSVG} size=\"24px\" />\n          )}\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default injectLazyLibs(['draftJs', 'draftJsPluginsUtils'])(LinkButton);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}