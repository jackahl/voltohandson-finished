{"ast":null,"code":"import config from '@plone/volto/registry';\nimport { matchPath } from 'react-router';\n\nconst blacklistRoutes = ({\n  dispatch,\n  getState\n}) => next => action => {\n  if (typeof action === 'function') {\n    return next(action);\n  }\n\n  switch (action.type) {\n    case '@@router/LOCATION_CHANGE':\n      const {\n        pathname\n      } = action.payload.location;\n      const {\n        externalRoutes = []\n      } = config.settings;\n      const route = externalRoutes.find(route => matchPath(pathname, route.match));\n\n      if (!route) {\n        return next(action);\n      } else {\n        window.location.replace(route.url ? route.url(action.payload) : pathname);\n      }\n\n      break;\n\n    default:\n      return next(action);\n  }\n};\n\nexport default blacklistRoutes;","map":{"version":3,"names":["config","matchPath","blacklistRoutes","dispatch","getState","next","action","type","pathname","payload","location","externalRoutes","settings","route","find","match","window","replace","url"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/src/middleware/blacklistRoutes.js"],"sourcesContent":["import config from '@plone/volto/registry';\nimport { matchPath } from 'react-router';\n\nconst blacklistRoutes = ({ dispatch, getState }) => (next) => (action) => {\n  if (typeof action === 'function') {\n    return next(action);\n  }\n\n  switch (action.type) {\n    case '@@router/LOCATION_CHANGE':\n      const { pathname } = action.payload.location;\n      const { externalRoutes = [] } = config.settings;\n\n      const route = externalRoutes.find((route) =>\n        matchPath(pathname, route.match),\n      );\n\n      if (!route) {\n        return next(action);\n      } else {\n        window.location.replace(\n          route.url ? route.url(action.payload) : pathname,\n        );\n      }\n      break;\n    default:\n      return next(action);\n  }\n};\n\nexport default blacklistRoutes;\n"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,uBAAnB;AACA,SAASC,SAAT,QAA0B,cAA1B;;AAEA,MAAMC,eAAe,GAAG,CAAC;EAAEC,QAAF;EAAYC;AAAZ,CAAD,KAA6BC,IAAD,IAAWC,MAAD,IAAY;EACxE,IAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;IAChC,OAAOD,IAAI,CAACC,MAAD,CAAX;EACD;;EAED,QAAQA,MAAM,CAACC,IAAf;IACE,KAAK,0BAAL;MACE,MAAM;QAAEC;MAAF,IAAeF,MAAM,CAACG,OAAP,CAAeC,QAApC;MACA,MAAM;QAAEC,cAAc,GAAG;MAAnB,IAA0BX,MAAM,CAACY,QAAvC;MAEA,MAAMC,KAAK,GAAGF,cAAc,CAACG,IAAf,CAAqBD,KAAD,IAChCZ,SAAS,CAACO,QAAD,EAAWK,KAAK,CAACE,KAAjB,CADG,CAAd;;MAIA,IAAI,CAACF,KAAL,EAAY;QACV,OAAOR,IAAI,CAACC,MAAD,CAAX;MACD,CAFD,MAEO;QACLU,MAAM,CAACN,QAAP,CAAgBO,OAAhB,CACEJ,KAAK,CAACK,GAAN,GAAYL,KAAK,CAACK,GAAN,CAAUZ,MAAM,CAACG,OAAjB,CAAZ,GAAwCD,QAD1C;MAGD;;MACD;;IACF;MACE,OAAOH,IAAI,CAACC,MAAD,CAAX;EAlBJ;AAoBD,CAzBD;;AA2BA,eAAeJ,eAAf"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}