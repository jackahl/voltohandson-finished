{"ast":null,"code":"import _map from \"lodash/map\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport _find from \"lodash/find\";\nimport _filter from \"lodash/filter\";\nvar _jsxFileName = \"/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/Toolbar/Types.jsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { FormattedMessage } from 'react-intl';\nimport { flattenToAppURL, langmap } from '@plone/volto/helpers';\nimport config from '@plone/volto/registry';\n\nconst Types = _ref => {\n  let {\n    types,\n    pathname,\n    content,\n    currentLanguage\n  } = _ref;\n  const {\n    settings\n  } = config;\n  return types.length > 0 || settings.isMultilingual && content['@components'].translations ? __jsx(\"div\", {\n    className: \"menu-more pastanaga-menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 5\n    }\n  }, types.length > 0 && __jsx(React.Fragment, null, __jsx(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 11\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"Add Content\",\n    defaultMessage: \"Add Content\\u2026\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: \"pastanaga-menu-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 11\n    }\n  }, __jsx(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 13\n    }\n  }, _map(_filter(types), item => {\n    // Strip the type for the item we want to add\n    const contentTypeToAdd = item['@id'].split('@types/')[1]; // If we are in the root or in /contents, we need to strip the preceeding / and /contents\n\n    const currentPath = pathname.replace(/\\/contents$/, '').replace(/\\/$/, ''); // Finally build the route URL\n\n    const addContentTypeRoute = `${currentPath}/add?type=${contentTypeToAdd}`;\n    return __jsx(\"li\", {\n      key: item['@id'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 19\n      }\n    }, __jsx(Link, {\n      to: addContentTypeRoute,\n      id: `toolbar-add-${item['@id'].split('@types/')[1].toLowerCase().replace(' ', '-')}`,\n      className: \"item\",\n      key: item.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 21\n      }\n    }, __jsx(FormattedMessage, {\n      id: item.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 23\n      }\n    })));\n  })))), settings.isMultilingual && content['@components'].translations && (() => {\n    const translationsLeft = _filter(settings.supportedLanguages, lang => !Boolean(content['@components'].translations && _find(content['@components'].translations.items, {\n      language: lang\n    })) && currentLanguage !== lang);\n\n    return !_isEmpty(translationsLeft) && __jsx(React.Fragment, null, __jsx(\"header\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }, __jsx(FormattedMessage, {\n      id: \"Add Translation\\u2026\",\n      defaultMessage: \"Add Translation\\u2026\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 19\n      }\n    })), __jsx(\"div\", {\n      className: \"pastanaga-menu-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, __jsx(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 19\n      }\n    }, _map(translationsLeft, lang => __jsx(\"li\", {\n      key: lang,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 23\n      }\n    }, __jsx(Link, {\n      to: {\n        pathname: `${pathname}/create-translation`,\n        state: {\n          type: content['@type'],\n          translationOf: flattenToAppURL(content['@id']),\n          language: lang\n        }\n      },\n      className: \"item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 25\n      }\n    }, __jsx(FormattedMessage, {\n      id: \"Translate to {lang}\",\n      defaultMessage: \"Translate to {lang}\",\n      values: {\n        lang: langmap[lang].nativeName.toLowerCase()\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 27\n      }\n    })))))));\n  })()) : __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  });\n};\n\n_c = Types;\nTypes.propTypes = {\n  pathname: PropTypes.string.isRequired,\n  types: PropTypes.arrayOf(PropTypes.shape({\n    '@id': PropTypes.string,\n    addable: PropTypes.bool,\n    title: PropTypes.string\n  })).isRequired\n};\nexport default connect(state => ({\n  types: _filter(state.types.types, 'addable'),\n  currentLanguage: state.intl.locale\n}), {})(Types);\n\nvar _c;\n\n$RefreshReg$(_c, \"Types\");","map":{"version":3,"names":["React","PropTypes","connect","Link","FormattedMessage","flattenToAppURL","langmap","config","Types","types","pathname","content","currentLanguage","settings","length","isMultilingual","translations","item","contentTypeToAdd","split","currentPath","replace","addContentTypeRoute","toLowerCase","title","translationsLeft","supportedLanguages","lang","Boolean","items","language","state","type","translationOf","nativeName","propTypes","string","isRequired","arrayOf","shape","addable","bool","intl","locale"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/Toolbar/Types.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { filter, find, isEmpty, map } from 'lodash';\nimport { FormattedMessage } from 'react-intl';\nimport { flattenToAppURL, langmap } from '@plone/volto/helpers';\nimport config from '@plone/volto/registry';\n\nconst Types = ({ types, pathname, content, currentLanguage }) => {\n  const { settings } = config;\n  return types.length > 0 ||\n    (settings.isMultilingual && content['@components'].translations) ? (\n    <div className=\"menu-more pastanaga-menu\">\n      {types.length > 0 && (\n        <>\n          <header>\n            <FormattedMessage id=\"Add Content\" defaultMessage=\"Add Content…\" />\n          </header>\n          <div className=\"pastanaga-menu-list\">\n            <ul>\n              {map(filter(types), (item) => {\n                // Strip the type for the item we want to add\n                const contentTypeToAdd = item['@id'].split('@types/')[1];\n                // If we are in the root or in /contents, we need to strip the preceeding / and /contents\n                const currentPath = pathname\n                  .replace(/\\/contents$/, '')\n                  .replace(/\\/$/, '');\n                // Finally build the route URL\n                const addContentTypeRoute = `${currentPath}/add?type=${contentTypeToAdd}`;\n                return (\n                  <li key={item['@id']}>\n                    <Link\n                      to={addContentTypeRoute}\n                      id={`toolbar-add-${item['@id']\n                        .split('@types/')[1]\n                        .toLowerCase()\n                        .replace(' ', '-')}`}\n                      className=\"item\"\n                      key={item.title}\n                    >\n                      <FormattedMessage id={item.title} />\n                    </Link>\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        </>\n      )}\n      {settings.isMultilingual &&\n        content['@components'].translations &&\n        (() => {\n          const translationsLeft = filter(\n            settings.supportedLanguages,\n            (lang) =>\n              !Boolean(\n                content['@components'].translations &&\n                  find(content['@components'].translations.items, {\n                    language: lang,\n                  }),\n              ) && currentLanguage !== lang,\n          );\n\n          return (\n            !isEmpty(translationsLeft) && (\n              <>\n                <header>\n                  <FormattedMessage\n                    id=\"Add Translation…\"\n                    defaultMessage=\"Add Translation…\"\n                  />\n                </header>\n                <div className=\"pastanaga-menu-list\">\n                  <ul>\n                    {map(translationsLeft, (lang) => (\n                      <li key={lang}>\n                        <Link\n                          to={{\n                            pathname: `${pathname}/create-translation`,\n                            state: {\n                              type: content['@type'],\n                              translationOf: flattenToAppURL(content['@id']),\n                              language: lang,\n                            },\n                          }}\n                          className=\"item\"\n                        >\n                          <FormattedMessage\n                            id=\"Translate to {lang}\"\n                            defaultMessage=\"Translate to {lang}\"\n                            values={{\n                              lang: langmap[lang].nativeName.toLowerCase(),\n                            }}\n                          />\n                        </Link>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </>\n            )\n          );\n        })()}\n    </div>\n  ) : (\n    <span />\n  );\n};\n\nTypes.propTypes = {\n  pathname: PropTypes.string.isRequired,\n  types: PropTypes.arrayOf(\n    PropTypes.shape({\n      '@id': PropTypes.string,\n      addable: PropTypes.bool,\n      title: PropTypes.string,\n    }),\n  ).isRequired,\n};\n\nexport default connect(\n  (state) => ({\n    types: filter(state.types.types, 'addable'),\n    currentLanguage: state.intl.locale,\n  }),\n  {},\n)(Types);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[{"id":"Add Content","defaultMessage":"Add Content…"},{"id":"Add Translation…","defaultMessage":"Add Translation…"},{"id":"Translate to {lang}","defaultMessage":"Translate to {lang}"}]}},"sourceType":"module"}