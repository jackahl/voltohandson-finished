{"ast":null,"code":"import _objectSpread from \"/home/jakob/workspace/training-project/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\n/* eslint no-console: 0 */\nimport React from 'react';\nimport objectAssign from 'object-assign';\nimport { ATTRIBUTE_NAMES, HELMET_ATTRIBUTE, HELMET_PROPS, HTML_TAG_MAP, REACT_TAG_MAP, SELF_CLOSING_TAGS, TAG_NAMES, TAG_PROPERTIES } from './HelmetConstants.js';\n\nconst encodeSpecialCharacters = function (str) {\n  let encode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  if (encode === false) {\n    return String(str);\n  }\n\n  return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#x27;');\n};\n\nconst getTitleFromPropsList = propsList => {\n  const innermostTitle = getInnermostProperty(propsList, TAG_NAMES.TITLE);\n  const innermostTemplate = getInnermostProperty(propsList, HELMET_PROPS.TITLE_TEMPLATE);\n\n  if (innermostTemplate && innermostTitle) {\n    // use function arg to avoid need to escape $ characters\n    return innermostTemplate.replace(/%s/g, () => Array.isArray(innermostTitle) ? innermostTitle.join('') : innermostTitle);\n  }\n\n  const innermostDefaultTitle = getInnermostProperty(propsList, HELMET_PROPS.DEFAULT_TITLE);\n  return innermostTitle || innermostDefaultTitle || undefined;\n};\n\nconst getOnChangeClientState = propsList => {\n  return getInnermostProperty(propsList, HELMET_PROPS.ON_CHANGE_CLIENT_STATE) || (() => {});\n};\n\nconst getAttributesFromPropsList = (tagType, propsList) => {\n  return propsList.filter(props => typeof props[tagType] !== 'undefined').map(props => props[tagType]).reduce((tagAttrs, current) => {\n    return _objectSpread(_objectSpread({}, tagAttrs), current);\n  }, {});\n};\n\nconst getBaseTagFromPropsList = (primaryAttributes, propsList) => {\n  return propsList.filter(props => typeof props[TAG_NAMES.BASE] !== 'undefined').map(props => props[TAG_NAMES.BASE]).reverse().reduce((innermostBaseTag, tag) => {\n    if (!innermostBaseTag.length) {\n      const keys = Object.keys(tag);\n\n      for (let i = 0; i < keys.length; i++) {\n        const attributeKey = keys[i];\n        const lowerCaseAttributeKey = attributeKey.toLowerCase();\n\n        if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && tag[lowerCaseAttributeKey]) {\n          return innermostBaseTag.concat(tag);\n        }\n      }\n    }\n\n    return innermostBaseTag;\n  }, []);\n};\n\nconst getTagsFromPropsList = (tagName, primaryAttributes, propsList) => {\n  // Calculate list of tags, giving priority innermost component (end of the propslist)\n  const approvedSeenTags = {};\n  return propsList.filter(props => {\n    if (Array.isArray(props[tagName])) {\n      return true;\n    }\n\n    if (typeof props[tagName] !== 'undefined') {\n      warn(`Helmet: ${tagName} should be of type \"Array\". Instead found type \"${typeof props[tagName]}\"`);\n    }\n\n    return false;\n  }).map(props => props[tagName]).reverse().reduce((approvedTags, instanceTags) => {\n    const instanceSeenTags = {};\n    instanceTags.filter(tag => {\n      let primaryAttributeKey;\n      const keys = Object.keys(tag);\n\n      for (let i = 0; i < keys.length; i++) {\n        const attributeKey = keys[i];\n        const lowerCaseAttributeKey = attributeKey.toLowerCase(); // Special rule with link tags, since rel and href are both primary tags, rel takes priority\n\n        if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && !(primaryAttributeKey === TAG_PROPERTIES.REL && tag[primaryAttributeKey].toLowerCase() === 'canonical') && !(lowerCaseAttributeKey === TAG_PROPERTIES.REL && tag[lowerCaseAttributeKey].toLowerCase() === 'stylesheet')) {\n          primaryAttributeKey = lowerCaseAttributeKey;\n        } // Special case for innerHTML which doesn't work lowercased\n\n\n        if (primaryAttributes.indexOf(attributeKey) !== -1 && (attributeKey === TAG_PROPERTIES.INNER_HTML || attributeKey === TAG_PROPERTIES.CSS_TEXT || attributeKey === TAG_PROPERTIES.ITEM_PROP)) {\n          primaryAttributeKey = attributeKey;\n        }\n      }\n\n      if (!primaryAttributeKey || !tag[primaryAttributeKey]) {\n        return false;\n      }\n\n      const value = tag[primaryAttributeKey].toLowerCase();\n\n      if (!approvedSeenTags[primaryAttributeKey]) {\n        approvedSeenTags[primaryAttributeKey] = {};\n      }\n\n      if (!instanceSeenTags[primaryAttributeKey]) {\n        instanceSeenTags[primaryAttributeKey] = {};\n      }\n\n      if (!approvedSeenTags[primaryAttributeKey][value]) {\n        instanceSeenTags[primaryAttributeKey][value] = true;\n        return true;\n      }\n\n      return false;\n    }).reverse().forEach(tag => approvedTags.push(tag)); // Update seen tags with tags from this instance\n\n    const keys = Object.keys(instanceSeenTags);\n\n    for (let i = 0; i < keys.length; i++) {\n      const attributeKey = keys[i];\n      const tagUnion = objectAssign({}, approvedSeenTags[attributeKey], instanceSeenTags[attributeKey]);\n      approvedSeenTags[attributeKey] = tagUnion;\n    }\n\n    return approvedTags;\n  }, []).reverse();\n};\n\nconst getInnermostProperty = (propsList, property) => {\n  for (let i = propsList.length - 1; i >= 0; i--) {\n    const props = propsList[i];\n\n    if (props.hasOwnProperty(property)) {\n      return props[property];\n    }\n  }\n\n  return null;\n};\n\nconst reducePropsToState = propsList => ({\n  baseTag: getBaseTagFromPropsList([TAG_PROPERTIES.HREF, TAG_PROPERTIES.TARGET], propsList),\n  bodyAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.BODY, propsList),\n  defer: getInnermostProperty(propsList, HELMET_PROPS.DEFER),\n  encode: getInnermostProperty(propsList, HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),\n  htmlAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.HTML, propsList),\n  linkTags: getTagsFromPropsList(TAG_NAMES.LINK, [TAG_PROPERTIES.REL, TAG_PROPERTIES.HREF], propsList),\n  metaTags: getTagsFromPropsList(TAG_NAMES.META, [TAG_PROPERTIES.NAME, TAG_PROPERTIES.CHARSET, TAG_PROPERTIES.HTTPEQUIV, TAG_PROPERTIES.PROPERTY, TAG_PROPERTIES.ITEM_PROP], propsList),\n  noscriptTags: getTagsFromPropsList(TAG_NAMES.NOSCRIPT, [TAG_PROPERTIES.INNER_HTML], propsList),\n  onChangeClientState: getOnChangeClientState(propsList),\n  scriptTags: getTagsFromPropsList(TAG_NAMES.SCRIPT, [TAG_PROPERTIES.SRC, TAG_PROPERTIES.INNER_HTML], propsList),\n  styleTags: getTagsFromPropsList(TAG_NAMES.STYLE, [TAG_PROPERTIES.CSS_TEXT], propsList),\n  title: getTitleFromPropsList(propsList),\n  titleAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.TITLE, propsList)\n});\n\nconst rafPolyfill = (() => {\n  let clock = Date.now();\n  return callback => {\n    const currentTime = Date.now();\n\n    if (currentTime - clock > 16) {\n      clock = currentTime;\n      callback(currentTime);\n    } else {\n      setTimeout(() => {\n        rafPolyfill(callback);\n      }, 0);\n    }\n  };\n})();\n\nconst cafPolyfill = id => clearTimeout(id);\n\nconst requestAnimationFrame = true ? window.requestAnimationFrame && window.requestAnimationFrame.bind(window) || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || rafPolyfill : global.requestAnimationFrame || rafPolyfill;\nconst cancelAnimationFrame = true ? window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || cafPolyfill : global.cancelAnimationFrame || cafPolyfill;\n\nconst warn = msg => {\n  return console && typeof console.warn === 'function' && console.warn(msg);\n};\n\nlet _helmetCallback = null;\n\nconst handleClientStateChange = newState => {\n  if (_helmetCallback) {\n    cancelAnimationFrame(_helmetCallback);\n  }\n\n  if (newState.defer) {\n    _helmetCallback = requestAnimationFrame(() => {\n      commitTagChanges(newState, () => {\n        _helmetCallback = null;\n      });\n    });\n  } else {\n    commitTagChanges(newState);\n    _helmetCallback = null;\n  }\n};\n\nconst commitTagChanges = (newState, cb) => {\n  const {\n    baseTag,\n    bodyAttributes,\n    htmlAttributes,\n    linkTags,\n    metaTags,\n    noscriptTags,\n    onChangeClientState,\n    scriptTags,\n    styleTags,\n    title,\n    titleAttributes\n  } = newState;\n  updateAttributes(TAG_NAMES.BODY, bodyAttributes);\n  updateAttributes(TAG_NAMES.HTML, htmlAttributes);\n  updateTitle(title, titleAttributes);\n  const tagUpdates = {\n    baseTag: updateTags(TAG_NAMES.BASE, baseTag),\n    linkTags: updateTags(TAG_NAMES.LINK, linkTags),\n    metaTags: updateTags(TAG_NAMES.META, metaTags),\n    noscriptTags: updateTags(TAG_NAMES.NOSCRIPT, noscriptTags),\n    scriptTags: updateTags(TAG_NAMES.SCRIPT, scriptTags),\n    styleTags: updateTags(TAG_NAMES.STYLE, styleTags)\n  };\n  const addedTags = {};\n  const removedTags = {};\n  Object.keys(tagUpdates).forEach(tagType => {\n    const {\n      newTags,\n      oldTags\n    } = tagUpdates[tagType];\n\n    if (newTags.length) {\n      addedTags[tagType] = newTags;\n    }\n\n    if (oldTags.length) {\n      removedTags[tagType] = tagUpdates[tagType].oldTags;\n    }\n  });\n  cb && cb();\n  onChangeClientState(newState, addedTags, removedTags);\n};\n\nconst flattenArray = possibleArray => {\n  return Array.isArray(possibleArray) ? possibleArray.join('') : possibleArray;\n};\n\nconst updateTitle = (title, attributes) => {\n  if (typeof title !== 'undefined' && document.title !== title) {\n    document.title = flattenArray(title);\n  }\n\n  updateAttributes(TAG_NAMES.TITLE, attributes);\n};\n\nconst updateAttributes = (tagName, attributes) => {\n  const elementTag = document.getElementsByTagName(tagName)[0];\n\n  if (!elementTag) {\n    return;\n  }\n\n  const helmetAttributeString = elementTag.getAttribute(HELMET_ATTRIBUTE);\n  const helmetAttributes = helmetAttributeString ? helmetAttributeString.split(',') : [];\n  const attributesToRemove = [].concat(helmetAttributes);\n  const attributeKeys = Object.keys(attributes);\n\n  for (let i = 0; i < attributeKeys.length; i++) {\n    const attribute = attributeKeys[i];\n    const value = attributes[attribute] || '';\n\n    if (elementTag.getAttribute(attribute) !== value) {\n      elementTag.setAttribute(attribute, value);\n    }\n\n    if (helmetAttributes.indexOf(attribute) === -1) {\n      helmetAttributes.push(attribute);\n    }\n\n    const indexToSave = attributesToRemove.indexOf(attribute);\n\n    if (indexToSave !== -1) {\n      attributesToRemove.splice(indexToSave, 1);\n    }\n  }\n\n  for (let i = attributesToRemove.length - 1; i >= 0; i--) {\n    elementTag.removeAttribute(attributesToRemove[i]);\n  }\n\n  if (helmetAttributes.length === attributesToRemove.length) {\n    elementTag.removeAttribute(HELMET_ATTRIBUTE);\n  } else if (elementTag.getAttribute(HELMET_ATTRIBUTE) !== attributeKeys.join(',')) {\n    elementTag.setAttribute(HELMET_ATTRIBUTE, attributeKeys.join(','));\n  }\n};\n\nconst updateTags = (type, tags) => {\n  const headElement = document.head || document.querySelector(TAG_NAMES.HEAD);\n  const tagNodes = headElement.querySelectorAll(`${type}[${HELMET_ATTRIBUTE}]`);\n  const oldTags = Array.prototype.slice.call(tagNodes);\n  const newTags = [];\n  let indexToDelete;\n\n  if (tags && tags.length) {\n    tags.forEach(tag => {\n      const newElement = document.createElement(type);\n\n      for (const attribute in tag) {\n        if (tag.hasOwnProperty(attribute)) {\n          if (attribute === TAG_PROPERTIES.INNER_HTML) {\n            newElement.innerHTML = tag.innerHTML;\n          } else if (attribute === TAG_PROPERTIES.CSS_TEXT) {\n            if (newElement.styleSheet) {\n              newElement.styleSheet.cssText = tag.cssText;\n            } else {\n              newElement.appendChild(document.createTextNode(tag.cssText));\n            }\n          } else {\n            const value = typeof tag[attribute] === 'undefined' ? '' : tag[attribute];\n            newElement.setAttribute(attribute, value);\n          }\n        }\n      }\n\n      newElement.setAttribute(HELMET_ATTRIBUTE, 'true'); // Remove a duplicate tag from domTagstoRemove, so it isn't cleared.\n\n      if (oldTags.some((existingTag, index) => {\n        indexToDelete = index;\n        return newElement.isEqualNode(existingTag);\n      })) {\n        oldTags.splice(indexToDelete, 1);\n      } else {\n        newTags.push(newElement);\n      }\n    });\n  }\n\n  oldTags.forEach(tag => tag.parentNode.removeChild(tag));\n  newTags.forEach(tag => headElement.appendChild(tag));\n  return {\n    oldTags,\n    newTags\n  };\n};\n\nconst generateElementAttributesAsString = attributes => Object.keys(attributes).reduce((str, key) => {\n  const attr = typeof attributes[key] !== 'undefined' ? `${key}=\"${attributes[key]}\"` : `${key}`;\n  return str ? `${str} ${attr}` : attr;\n}, '');\n\nconst generateTitleAsString = (type, title, attributes, encode) => {\n  const attributeString = generateElementAttributesAsString(attributes);\n  const flattenedTitle = flattenArray(title);\n  return attributeString ? `<${type} ${HELMET_ATTRIBUTE}=\"true\" ${attributeString}>${encodeSpecialCharacters(flattenedTitle, encode)}</${type}>` : `<${type} ${HELMET_ATTRIBUTE}=\"true\">${encodeSpecialCharacters(flattenedTitle, encode)}</${type}>`;\n};\n\nconst generateTagsAsString = (type, tags, encode) => tags.reduce((str, tag) => {\n  const attributeHtml = Object.keys(tag).filter(attribute => !(attribute === TAG_PROPERTIES.INNER_HTML || attribute === TAG_PROPERTIES.CSS_TEXT)).reduce((string, attribute) => {\n    const attr = typeof tag[attribute] === 'undefined' ? attribute : `${attribute}=\"${encodeSpecialCharacters(tag[attribute], encode)}\"`;\n    return string ? `${string} ${attr}` : attr;\n  }, '');\n  const tagContent = tag.innerHTML || tag.cssText || '';\n  const isSelfClosing = SELF_CLOSING_TAGS.indexOf(type) === -1;\n  return `${str}<${type} ${HELMET_ATTRIBUTE}=\"true\" ${attributeHtml}${isSelfClosing ? `/>` : `>${tagContent}</${type}>`}`;\n}, '');\n\nconst convertElementAttributestoReactProps = function (attributes) {\n  let initProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Object.keys(attributes).reduce((obj, key) => {\n    obj[REACT_TAG_MAP[key] || key] = attributes[key];\n    return obj;\n  }, initProps);\n};\n\nconst convertReactPropstoHtmlAttributes = function (props) {\n  let initAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Object.keys(props).reduce((obj, key) => {\n    obj[HTML_TAG_MAP[key] || key] = props[key];\n    return obj;\n  }, initAttributes);\n};\n\nconst generateTitleAsReactComponent = (type, title, attributes) => {\n  // assigning into an array to define toString function on it\n  const initProps = {\n    key: title,\n    [HELMET_ATTRIBUTE]: true\n  };\n  const props = convertElementAttributestoReactProps(attributes, initProps);\n  return [/*#__PURE__*/React.createElement(TAG_NAMES.TITLE, props, title)];\n};\n\nconst generateTagsAsReactComponent = (type, tags) => tags.map((tag, i) => {\n  const mappedTag = {\n    key: i,\n    [HELMET_ATTRIBUTE]: true\n  };\n  Object.keys(tag).forEach(attribute => {\n    const mappedAttribute = REACT_TAG_MAP[attribute] || attribute;\n\n    if (mappedAttribute === TAG_PROPERTIES.INNER_HTML || mappedAttribute === TAG_PROPERTIES.CSS_TEXT) {\n      const content = tag.innerHTML || tag.cssText;\n      mappedTag.dangerouslySetInnerHTML = {\n        __html: content\n      };\n    } else {\n      mappedTag[mappedAttribute] = tag[attribute];\n    }\n  });\n  return /*#__PURE__*/React.createElement(type, mappedTag);\n});\n\nconst getMethodsForTag = (type, tags, encode) => {\n  switch (type) {\n    case TAG_NAMES.TITLE:\n      return {\n        toComponent: () => generateTitleAsReactComponent(type, tags.title, tags.titleAttributes, encode),\n        toString: () => generateTitleAsString(type, tags.title, tags.titleAttributes, encode)\n      };\n\n    case ATTRIBUTE_NAMES.BODY:\n    case ATTRIBUTE_NAMES.HTML:\n      return {\n        toComponent: () => convertElementAttributestoReactProps(tags),\n        toString: () => generateElementAttributesAsString(tags)\n      };\n\n    default:\n      return {\n        toComponent: () => generateTagsAsReactComponent(type, tags),\n        toString: () => generateTagsAsString(type, tags, encode)\n      };\n  }\n};\n\nconst mapStateOnServer = _ref => {\n  let {\n    baseTag,\n    bodyAttributes,\n    encode,\n    htmlAttributes,\n    linkTags,\n    metaTags,\n    noscriptTags,\n    scriptTags,\n    styleTags,\n    title = '',\n    titleAttributes\n  } = _ref;\n  return {\n    base: getMethodsForTag(TAG_NAMES.BASE, baseTag, encode),\n    bodyAttributes: getMethodsForTag(ATTRIBUTE_NAMES.BODY, bodyAttributes, encode),\n    htmlAttributes: getMethodsForTag(ATTRIBUTE_NAMES.HTML, htmlAttributes, encode),\n    link: getMethodsForTag(TAG_NAMES.LINK, linkTags, encode),\n    meta: getMethodsForTag(TAG_NAMES.META, metaTags, encode),\n    noscript: getMethodsForTag(TAG_NAMES.NOSCRIPT, noscriptTags, encode),\n    script: getMethodsForTag(TAG_NAMES.SCRIPT, scriptTags, encode),\n    style: getMethodsForTag(TAG_NAMES.STYLE, styleTags, encode),\n    title: getMethodsForTag(TAG_NAMES.TITLE, {\n      title,\n      titleAttributes\n    }, encode)\n  };\n};\n\nexport { convertReactPropstoHtmlAttributes };\nexport { handleClientStateChange };\nexport { mapStateOnServer };\nexport { reducePropsToState };\nexport { requestAnimationFrame };\nexport { warn };","map":{"version":3,"names":["React","objectAssign","ATTRIBUTE_NAMES","HELMET_ATTRIBUTE","HELMET_PROPS","HTML_TAG_MAP","REACT_TAG_MAP","SELF_CLOSING_TAGS","TAG_NAMES","TAG_PROPERTIES","encodeSpecialCharacters","str","encode","String","replace","getTitleFromPropsList","propsList","innermostTitle","getInnermostProperty","TITLE","innermostTemplate","TITLE_TEMPLATE","Array","isArray","join","innermostDefaultTitle","DEFAULT_TITLE","undefined","getOnChangeClientState","ON_CHANGE_CLIENT_STATE","getAttributesFromPropsList","tagType","filter","props","map","reduce","tagAttrs","current","getBaseTagFromPropsList","primaryAttributes","BASE","reverse","innermostBaseTag","tag","length","keys","Object","i","attributeKey","lowerCaseAttributeKey","toLowerCase","indexOf","concat","getTagsFromPropsList","tagName","approvedSeenTags","warn","approvedTags","instanceTags","instanceSeenTags","primaryAttributeKey","REL","INNER_HTML","CSS_TEXT","ITEM_PROP","value","forEach","push","tagUnion","property","hasOwnProperty","reducePropsToState","baseTag","HREF","TARGET","bodyAttributes","BODY","defer","DEFER","ENCODE_SPECIAL_CHARACTERS","htmlAttributes","HTML","linkTags","LINK","metaTags","META","NAME","CHARSET","HTTPEQUIV","PROPERTY","noscriptTags","NOSCRIPT","onChangeClientState","scriptTags","SCRIPT","SRC","styleTags","STYLE","title","titleAttributes","rafPolyfill","clock","Date","now","callback","currentTime","setTimeout","cafPolyfill","id","clearTimeout","requestAnimationFrame","window","bind","webkitRequestAnimationFrame","mozRequestAnimationFrame","global","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","msg","console","_helmetCallback","handleClientStateChange","newState","commitTagChanges","cb","updateAttributes","updateTitle","tagUpdates","updateTags","addedTags","removedTags","newTags","oldTags","flattenArray","possibleArray","attributes","document","elementTag","getElementsByTagName","helmetAttributeString","getAttribute","helmetAttributes","split","attributesToRemove","attributeKeys","attribute","setAttribute","indexToSave","splice","removeAttribute","type","tags","headElement","head","querySelector","HEAD","tagNodes","querySelectorAll","prototype","slice","call","indexToDelete","newElement","createElement","innerHTML","styleSheet","cssText","appendChild","createTextNode","some","existingTag","index","isEqualNode","parentNode","removeChild","generateElementAttributesAsString","key","attr","generateTitleAsString","attributeString","flattenedTitle","generateTagsAsString","attributeHtml","string","tagContent","isSelfClosing","convertElementAttributestoReactProps","initProps","obj","convertReactPropstoHtmlAttributes","initAttributes","generateTitleAsReactComponent","generateTagsAsReactComponent","mappedTag","mappedAttribute","content","dangerouslySetInnerHTML","__html","getMethodsForTag","toComponent","toString","mapStateOnServer","base","link","meta","noscript","script","style"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/src/helpers/Helmet/HelmetUtils.js"],"sourcesContent":["/* eslint no-console: 0 */\nimport React from 'react';\nimport objectAssign from 'object-assign';\nimport {\n  ATTRIBUTE_NAMES,\n  HELMET_ATTRIBUTE,\n  HELMET_PROPS,\n  HTML_TAG_MAP,\n  REACT_TAG_MAP,\n  SELF_CLOSING_TAGS,\n  TAG_NAMES,\n  TAG_PROPERTIES,\n} from './HelmetConstants.js';\n\nconst encodeSpecialCharacters = (str, encode = true) => {\n  if (encode === false) {\n    return String(str);\n  }\n\n  return String(str)\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;');\n};\n\nconst getTitleFromPropsList = (propsList) => {\n  const innermostTitle = getInnermostProperty(propsList, TAG_NAMES.TITLE);\n  const innermostTemplate = getInnermostProperty(\n    propsList,\n    HELMET_PROPS.TITLE_TEMPLATE,\n  );\n\n  if (innermostTemplate && innermostTitle) {\n    // use function arg to avoid need to escape $ characters\n    return innermostTemplate.replace(/%s/g, () =>\n      Array.isArray(innermostTitle) ? innermostTitle.join('') : innermostTitle,\n    );\n  }\n\n  const innermostDefaultTitle = getInnermostProperty(\n    propsList,\n    HELMET_PROPS.DEFAULT_TITLE,\n  );\n\n  return innermostTitle || innermostDefaultTitle || undefined;\n};\n\nconst getOnChangeClientState = (propsList) => {\n  return (\n    getInnermostProperty(propsList, HELMET_PROPS.ON_CHANGE_CLIENT_STATE) ||\n    (() => {})\n  );\n};\n\nconst getAttributesFromPropsList = (tagType, propsList) => {\n  return propsList\n    .filter((props) => typeof props[tagType] !== 'undefined')\n    .map((props) => props[tagType])\n    .reduce((tagAttrs, current) => {\n      return { ...tagAttrs, ...current };\n    }, {});\n};\n\nconst getBaseTagFromPropsList = (primaryAttributes, propsList) => {\n  return propsList\n    .filter((props) => typeof props[TAG_NAMES.BASE] !== 'undefined')\n    .map((props) => props[TAG_NAMES.BASE])\n    .reverse()\n    .reduce((innermostBaseTag, tag) => {\n      if (!innermostBaseTag.length) {\n        const keys = Object.keys(tag);\n\n        for (let i = 0; i < keys.length; i++) {\n          const attributeKey = keys[i];\n          const lowerCaseAttributeKey = attributeKey.toLowerCase();\n\n          if (\n            primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 &&\n            tag[lowerCaseAttributeKey]\n          ) {\n            return innermostBaseTag.concat(tag);\n          }\n        }\n      }\n\n      return innermostBaseTag;\n    }, []);\n};\n\nconst getTagsFromPropsList = (tagName, primaryAttributes, propsList) => {\n  // Calculate list of tags, giving priority innermost component (end of the propslist)\n  const approvedSeenTags = {};\n\n  return propsList\n    .filter((props) => {\n      if (Array.isArray(props[tagName])) {\n        return true;\n      }\n      if (typeof props[tagName] !== 'undefined') {\n        warn(\n          `Helmet: ${tagName} should be of type \"Array\". Instead found type \"${typeof props[\n            tagName\n          ]}\"`,\n        );\n      }\n      return false;\n    })\n    .map((props) => props[tagName])\n    .reverse()\n    .reduce((approvedTags, instanceTags) => {\n      const instanceSeenTags = {};\n\n      instanceTags\n        .filter((tag) => {\n          let primaryAttributeKey;\n          const keys = Object.keys(tag);\n          for (let i = 0; i < keys.length; i++) {\n            const attributeKey = keys[i];\n            const lowerCaseAttributeKey = attributeKey.toLowerCase();\n\n            // Special rule with link tags, since rel and href are both primary tags, rel takes priority\n            if (\n              primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 &&\n              !(\n                primaryAttributeKey === TAG_PROPERTIES.REL &&\n                tag[primaryAttributeKey].toLowerCase() === 'canonical'\n              ) &&\n              !(\n                lowerCaseAttributeKey === TAG_PROPERTIES.REL &&\n                tag[lowerCaseAttributeKey].toLowerCase() === 'stylesheet'\n              )\n            ) {\n              primaryAttributeKey = lowerCaseAttributeKey;\n            }\n            // Special case for innerHTML which doesn't work lowercased\n            if (\n              primaryAttributes.indexOf(attributeKey) !== -1 &&\n              (attributeKey === TAG_PROPERTIES.INNER_HTML ||\n                attributeKey === TAG_PROPERTIES.CSS_TEXT ||\n                attributeKey === TAG_PROPERTIES.ITEM_PROP)\n            ) {\n              primaryAttributeKey = attributeKey;\n            }\n          }\n\n          if (!primaryAttributeKey || !tag[primaryAttributeKey]) {\n            return false;\n          }\n\n          const value = tag[primaryAttributeKey].toLowerCase();\n\n          if (!approvedSeenTags[primaryAttributeKey]) {\n            approvedSeenTags[primaryAttributeKey] = {};\n          }\n\n          if (!instanceSeenTags[primaryAttributeKey]) {\n            instanceSeenTags[primaryAttributeKey] = {};\n          }\n\n          if (!approvedSeenTags[primaryAttributeKey][value]) {\n            instanceSeenTags[primaryAttributeKey][value] = true;\n            return true;\n          }\n\n          return false;\n        })\n        .reverse()\n        .forEach((tag) => approvedTags.push(tag));\n\n      // Update seen tags with tags from this instance\n      const keys = Object.keys(instanceSeenTags);\n      for (let i = 0; i < keys.length; i++) {\n        const attributeKey = keys[i];\n        const tagUnion = objectAssign(\n          {},\n          approvedSeenTags[attributeKey],\n          instanceSeenTags[attributeKey],\n        );\n\n        approvedSeenTags[attributeKey] = tagUnion;\n      }\n\n      return approvedTags;\n    }, [])\n    .reverse();\n};\n\nconst getInnermostProperty = (propsList, property) => {\n  for (let i = propsList.length - 1; i >= 0; i--) {\n    const props = propsList[i];\n\n    if (props.hasOwnProperty(property)) {\n      return props[property];\n    }\n  }\n\n  return null;\n};\n\nconst reducePropsToState = (propsList) => ({\n  baseTag: getBaseTagFromPropsList(\n    [TAG_PROPERTIES.HREF, TAG_PROPERTIES.TARGET],\n    propsList,\n  ),\n  bodyAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.BODY, propsList),\n  defer: getInnermostProperty(propsList, HELMET_PROPS.DEFER),\n  encode: getInnermostProperty(\n    propsList,\n    HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS,\n  ),\n  htmlAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.HTML, propsList),\n  linkTags: getTagsFromPropsList(\n    TAG_NAMES.LINK,\n    [TAG_PROPERTIES.REL, TAG_PROPERTIES.HREF],\n    propsList,\n  ),\n  metaTags: getTagsFromPropsList(\n    TAG_NAMES.META,\n    [\n      TAG_PROPERTIES.NAME,\n      TAG_PROPERTIES.CHARSET,\n      TAG_PROPERTIES.HTTPEQUIV,\n      TAG_PROPERTIES.PROPERTY,\n      TAG_PROPERTIES.ITEM_PROP,\n    ],\n    propsList,\n  ),\n  noscriptTags: getTagsFromPropsList(\n    TAG_NAMES.NOSCRIPT,\n    [TAG_PROPERTIES.INNER_HTML],\n    propsList,\n  ),\n  onChangeClientState: getOnChangeClientState(propsList),\n  scriptTags: getTagsFromPropsList(\n    TAG_NAMES.SCRIPT,\n    [TAG_PROPERTIES.SRC, TAG_PROPERTIES.INNER_HTML],\n    propsList,\n  ),\n  styleTags: getTagsFromPropsList(\n    TAG_NAMES.STYLE,\n    [TAG_PROPERTIES.CSS_TEXT],\n    propsList,\n  ),\n  title: getTitleFromPropsList(propsList),\n  titleAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.TITLE, propsList),\n});\n\nconst rafPolyfill = (() => {\n  let clock = Date.now();\n\n  return (callback) => {\n    const currentTime = Date.now();\n\n    if (currentTime - clock > 16) {\n      clock = currentTime;\n      callback(currentTime);\n    } else {\n      setTimeout(() => {\n        rafPolyfill(callback);\n      }, 0);\n    }\n  };\n})();\n\nconst cafPolyfill = (id) => clearTimeout(id);\n\nconst requestAnimationFrame =\n  typeof window !== 'undefined'\n    ? (window.requestAnimationFrame &&\n        window.requestAnimationFrame.bind(window)) ||\n      window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      rafPolyfill\n    : global.requestAnimationFrame || rafPolyfill;\n\nconst cancelAnimationFrame =\n  typeof window !== 'undefined'\n    ? window.cancelAnimationFrame ||\n      window.webkitCancelAnimationFrame ||\n      window.mozCancelAnimationFrame ||\n      cafPolyfill\n    : global.cancelAnimationFrame || cafPolyfill;\n\nconst warn = (msg) => {\n  return console && typeof console.warn === 'function' && console.warn(msg);\n};\n\nlet _helmetCallback = null;\n\nconst handleClientStateChange = (newState) => {\n  if (_helmetCallback) {\n    cancelAnimationFrame(_helmetCallback);\n  }\n\n  if (newState.defer) {\n    _helmetCallback = requestAnimationFrame(() => {\n      commitTagChanges(newState, () => {\n        _helmetCallback = null;\n      });\n    });\n  } else {\n    commitTagChanges(newState);\n    _helmetCallback = null;\n  }\n};\n\nconst commitTagChanges = (newState, cb) => {\n  const {\n    baseTag,\n    bodyAttributes,\n    htmlAttributes,\n    linkTags,\n    metaTags,\n    noscriptTags,\n    onChangeClientState,\n    scriptTags,\n    styleTags,\n    title,\n    titleAttributes,\n  } = newState;\n  updateAttributes(TAG_NAMES.BODY, bodyAttributes);\n  updateAttributes(TAG_NAMES.HTML, htmlAttributes);\n\n  updateTitle(title, titleAttributes);\n\n  const tagUpdates = {\n    baseTag: updateTags(TAG_NAMES.BASE, baseTag),\n    linkTags: updateTags(TAG_NAMES.LINK, linkTags),\n    metaTags: updateTags(TAG_NAMES.META, metaTags),\n    noscriptTags: updateTags(TAG_NAMES.NOSCRIPT, noscriptTags),\n    scriptTags: updateTags(TAG_NAMES.SCRIPT, scriptTags),\n    styleTags: updateTags(TAG_NAMES.STYLE, styleTags),\n  };\n\n  const addedTags = {};\n  const removedTags = {};\n\n  Object.keys(tagUpdates).forEach((tagType) => {\n    const { newTags, oldTags } = tagUpdates[tagType];\n\n    if (newTags.length) {\n      addedTags[tagType] = newTags;\n    }\n    if (oldTags.length) {\n      removedTags[tagType] = tagUpdates[tagType].oldTags;\n    }\n  });\n\n  cb && cb();\n\n  onChangeClientState(newState, addedTags, removedTags);\n};\n\nconst flattenArray = (possibleArray) => {\n  return Array.isArray(possibleArray) ? possibleArray.join('') : possibleArray;\n};\n\nconst updateTitle = (title, attributes) => {\n  if (typeof title !== 'undefined' && document.title !== title) {\n    document.title = flattenArray(title);\n  }\n\n  updateAttributes(TAG_NAMES.TITLE, attributes);\n};\n\nconst updateAttributes = (tagName, attributes) => {\n  const elementTag = document.getElementsByTagName(tagName)[0];\n\n  if (!elementTag) {\n    return;\n  }\n\n  const helmetAttributeString = elementTag.getAttribute(HELMET_ATTRIBUTE);\n  const helmetAttributes = helmetAttributeString\n    ? helmetAttributeString.split(',')\n    : [];\n  const attributesToRemove = [].concat(helmetAttributes);\n  const attributeKeys = Object.keys(attributes);\n\n  for (let i = 0; i < attributeKeys.length; i++) {\n    const attribute = attributeKeys[i];\n    const value = attributes[attribute] || '';\n\n    if (elementTag.getAttribute(attribute) !== value) {\n      elementTag.setAttribute(attribute, value);\n    }\n\n    if (helmetAttributes.indexOf(attribute) === -1) {\n      helmetAttributes.push(attribute);\n    }\n\n    const indexToSave = attributesToRemove.indexOf(attribute);\n    if (indexToSave !== -1) {\n      attributesToRemove.splice(indexToSave, 1);\n    }\n  }\n\n  for (let i = attributesToRemove.length - 1; i >= 0; i--) {\n    elementTag.removeAttribute(attributesToRemove[i]);\n  }\n\n  if (helmetAttributes.length === attributesToRemove.length) {\n    elementTag.removeAttribute(HELMET_ATTRIBUTE);\n  } else if (\n    elementTag.getAttribute(HELMET_ATTRIBUTE) !== attributeKeys.join(',')\n  ) {\n    elementTag.setAttribute(HELMET_ATTRIBUTE, attributeKeys.join(','));\n  }\n};\n\nconst updateTags = (type, tags) => {\n  const headElement = document.head || document.querySelector(TAG_NAMES.HEAD);\n  const tagNodes = headElement.querySelectorAll(`${type}[${HELMET_ATTRIBUTE}]`);\n  const oldTags = Array.prototype.slice.call(tagNodes);\n  const newTags = [];\n  let indexToDelete;\n\n  if (tags && tags.length) {\n    tags.forEach((tag) => {\n      const newElement = document.createElement(type);\n\n      for (const attribute in tag) {\n        if (tag.hasOwnProperty(attribute)) {\n          if (attribute === TAG_PROPERTIES.INNER_HTML) {\n            newElement.innerHTML = tag.innerHTML;\n          } else if (attribute === TAG_PROPERTIES.CSS_TEXT) {\n            if (newElement.styleSheet) {\n              newElement.styleSheet.cssText = tag.cssText;\n            } else {\n              newElement.appendChild(document.createTextNode(tag.cssText));\n            }\n          } else {\n            const value =\n              typeof tag[attribute] === 'undefined' ? '' : tag[attribute];\n            newElement.setAttribute(attribute, value);\n          }\n        }\n      }\n\n      newElement.setAttribute(HELMET_ATTRIBUTE, 'true');\n\n      // Remove a duplicate tag from domTagstoRemove, so it isn't cleared.\n      if (\n        oldTags.some((existingTag, index) => {\n          indexToDelete = index;\n          return newElement.isEqualNode(existingTag);\n        })\n      ) {\n        oldTags.splice(indexToDelete, 1);\n      } else {\n        newTags.push(newElement);\n      }\n    });\n  }\n\n  oldTags.forEach((tag) => tag.parentNode.removeChild(tag));\n  newTags.forEach((tag) => headElement.appendChild(tag));\n\n  return {\n    oldTags,\n    newTags,\n  };\n};\n\nconst generateElementAttributesAsString = (attributes) =>\n  Object.keys(attributes).reduce((str, key) => {\n    const attr =\n      typeof attributes[key] !== 'undefined'\n        ? `${key}=\"${attributes[key]}\"`\n        : `${key}`;\n    return str ? `${str} ${attr}` : attr;\n  }, '');\n\nconst generateTitleAsString = (type, title, attributes, encode) => {\n  const attributeString = generateElementAttributesAsString(attributes);\n  const flattenedTitle = flattenArray(title);\n  return attributeString\n    ? `<${type} ${HELMET_ATTRIBUTE}=\"true\" ${attributeString}>${encodeSpecialCharacters(\n        flattenedTitle,\n        encode,\n      )}</${type}>`\n    : `<${type} ${HELMET_ATTRIBUTE}=\"true\">${encodeSpecialCharacters(\n        flattenedTitle,\n        encode,\n      )}</${type}>`;\n};\n\nconst generateTagsAsString = (type, tags, encode) =>\n  tags.reduce((str, tag) => {\n    const attributeHtml = Object.keys(tag)\n      .filter(\n        (attribute) =>\n          !(\n            attribute === TAG_PROPERTIES.INNER_HTML ||\n            attribute === TAG_PROPERTIES.CSS_TEXT\n          ),\n      )\n      .reduce((string, attribute) => {\n        const attr =\n          typeof tag[attribute] === 'undefined'\n            ? attribute\n            : `${attribute}=\"${encodeSpecialCharacters(\n                tag[attribute],\n                encode,\n              )}\"`;\n        return string ? `${string} ${attr}` : attr;\n      }, '');\n\n    const tagContent = tag.innerHTML || tag.cssText || '';\n\n    const isSelfClosing = SELF_CLOSING_TAGS.indexOf(type) === -1;\n\n    return `${str}<${type} ${HELMET_ATTRIBUTE}=\"true\" ${attributeHtml}${\n      isSelfClosing ? `/>` : `>${tagContent}</${type}>`\n    }`;\n  }, '');\n\nconst convertElementAttributestoReactProps = (attributes, initProps = {}) => {\n  return Object.keys(attributes).reduce((obj, key) => {\n    obj[REACT_TAG_MAP[key] || key] = attributes[key];\n    return obj;\n  }, initProps);\n};\n\nconst convertReactPropstoHtmlAttributes = (props, initAttributes = {}) => {\n  return Object.keys(props).reduce((obj, key) => {\n    obj[HTML_TAG_MAP[key] || key] = props[key];\n    return obj;\n  }, initAttributes);\n};\n\nconst generateTitleAsReactComponent = (type, title, attributes) => {\n  // assigning into an array to define toString function on it\n  const initProps = {\n    key: title,\n    [HELMET_ATTRIBUTE]: true,\n  };\n  const props = convertElementAttributestoReactProps(attributes, initProps);\n\n  return [React.createElement(TAG_NAMES.TITLE, props, title)];\n};\n\nconst generateTagsAsReactComponent = (type, tags) =>\n  tags.map((tag, i) => {\n    const mappedTag = {\n      key: i,\n      [HELMET_ATTRIBUTE]: true,\n    };\n\n    Object.keys(tag).forEach((attribute) => {\n      const mappedAttribute = REACT_TAG_MAP[attribute] || attribute;\n\n      if (\n        mappedAttribute === TAG_PROPERTIES.INNER_HTML ||\n        mappedAttribute === TAG_PROPERTIES.CSS_TEXT\n      ) {\n        const content = tag.innerHTML || tag.cssText;\n        mappedTag.dangerouslySetInnerHTML = { __html: content };\n      } else {\n        mappedTag[mappedAttribute] = tag[attribute];\n      }\n    });\n\n    return React.createElement(type, mappedTag);\n  });\n\nconst getMethodsForTag = (type, tags, encode) => {\n  switch (type) {\n    case TAG_NAMES.TITLE:\n      return {\n        toComponent: () =>\n          generateTitleAsReactComponent(\n            type,\n            tags.title,\n            tags.titleAttributes,\n            encode,\n          ),\n        toString: () =>\n          generateTitleAsString(type, tags.title, tags.titleAttributes, encode),\n      };\n    case ATTRIBUTE_NAMES.BODY:\n    case ATTRIBUTE_NAMES.HTML:\n      return {\n        toComponent: () => convertElementAttributestoReactProps(tags),\n        toString: () => generateElementAttributesAsString(tags),\n      };\n    default:\n      return {\n        toComponent: () => generateTagsAsReactComponent(type, tags),\n        toString: () => generateTagsAsString(type, tags, encode),\n      };\n  }\n};\n\nconst mapStateOnServer = ({\n  baseTag,\n  bodyAttributes,\n  encode,\n  htmlAttributes,\n  linkTags,\n  metaTags,\n  noscriptTags,\n  scriptTags,\n  styleTags,\n  title = '',\n  titleAttributes,\n}) => ({\n  base: getMethodsForTag(TAG_NAMES.BASE, baseTag, encode),\n  bodyAttributes: getMethodsForTag(\n    ATTRIBUTE_NAMES.BODY,\n    bodyAttributes,\n    encode,\n  ),\n  htmlAttributes: getMethodsForTag(\n    ATTRIBUTE_NAMES.HTML,\n    htmlAttributes,\n    encode,\n  ),\n  link: getMethodsForTag(TAG_NAMES.LINK, linkTags, encode),\n  meta: getMethodsForTag(TAG_NAMES.META, metaTags, encode),\n  noscript: getMethodsForTag(TAG_NAMES.NOSCRIPT, noscriptTags, encode),\n  script: getMethodsForTag(TAG_NAMES.SCRIPT, scriptTags, encode),\n  style: getMethodsForTag(TAG_NAMES.STYLE, styleTags, encode),\n  title: getMethodsForTag(TAG_NAMES.TITLE, { title, titleAttributes }, encode),\n});\n\nexport { convertReactPropstoHtmlAttributes };\nexport { handleClientStateChange };\nexport { mapStateOnServer };\nexport { reducePropsToState };\nexport { requestAnimationFrame };\nexport { warn };\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}