{"ast":null,"code":"var _jsxFileName = \"/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/LockingToastsFactory/LockingToastsFactory.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { toast } from 'react-toastify';\nimport { useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { FormattedDate, Toast } from '@plone/volto/components';\nimport useDeepCompareEffect from 'use-deep-compare-effect';\nconst messages = defineMessages({\n  thisItemIsLocked: {\n    \"id\": \"This item was locked by {creator} on {date}\",\n    \"defaultMessage\": \"This item was locked by {creator} on {date}\"\n  },\n  unlockItem: {\n    \"id\": \"If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.\",\n    \"defaultMessage\": \"If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.\"\n  }\n});\n\nconst LockingToastsFactory = props => {\n  _s();\n\n  const intl = useIntl();\n  const pathname = useLocation().pathname;\n  const lang = useSelector(state => state.intl.locale);\n  const {\n    content,\n    user\n  } = props;\n  const lock = content === null || content === void 0 ? void 0 : content.lock;\n  const creator = (lock === null || lock === void 0 ? void 0 : lock.creator_name) || (lock === null || lock === void 0 ? void 0 : lock.creator) || '';\n  const date = (lock === null || lock === void 0 ? void 0 : lock.created) || '';\n  const dateOptions = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric'\n  };\n  useDeepCompareEffect(() => {\n    if (user && content) {\n      if (lock !== null && lock !== void 0 && lock.locked && lock !== null && lock !== void 0 && lock.stealable && (lock === null || lock === void 0 ? void 0 : lock.creator) !== user) {\n        if (toast.isActive('lockinginfo')) {\n          toast.update('lockinginfo', {\n            render: __jsx(Toast, {\n              info: true,\n              title: intl.formatMessage(messages.thisItemIsLocked, {\n                creator: creator,\n                date: __jsx(FormattedDate, {\n                  date: date,\n                  format: dateOptions,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 48,\n                    columnNumber: 25\n                  }\n                })\n              }),\n              content: intl.formatMessage(messages.unlockItem, {}),\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 44,\n                columnNumber: 15\n              }\n            })\n          });\n        } else {\n          toast.info(__jsx(Toast, {\n            info: true,\n            title: intl.formatMessage(messages.thisItemIsLocked, {\n              creator: creator,\n              date: __jsx(FormattedDate, {\n                date: date,\n                format: dateOptions,\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 23\n                }\n              })\n            }),\n            content: intl.formatMessage(messages.unlockItem, {}),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 13\n            }\n          }), {\n            toastId: 'lockinginfo',\n            autoClose: false,\n            closeButton: false,\n            transition: null\n          });\n        }\n      } else {\n        if (toast.isActive('lockinginfo')) {\n          toast.dismiss('lockinginfo');\n        }\n      }\n    }\n  }, [content, creator, date, dateOptions, intl, lang, lock, pathname, user]);\n  return null;\n};\n\n_s(LockingToastsFactory, \"/NYa8V5LW7Ik6OdrNG/7N0BmhdE=\", false, function () {\n  return [useIntl, useLocation, useSelector, useDeepCompareEffect];\n});\n\n_c = LockingToastsFactory;\nexport default LockingToastsFactory;\n\nvar _c;\n\n$RefreshReg$(_c, \"LockingToastsFactory\");","map":{"version":3,"names":["React","toast","useSelector","useLocation","defineMessages","useIntl","FormattedDate","Toast","useDeepCompareEffect","messages","thisItemIsLocked","unlockItem","LockingToastsFactory","props","intl","pathname","lang","state","locale","content","user","lock","creator","creator_name","date","created","dateOptions","year","month","day","hour","minute","locked","stealable","isActive","update","render","formatMessage","info","toastId","autoClose","closeButton","transition","dismiss"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/LockingToastsFactory/LockingToastsFactory.jsx"],"sourcesContent":["import React from 'react';\nimport { toast } from 'react-toastify';\nimport { useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { FormattedDate, Toast } from '@plone/volto/components';\nimport useDeepCompareEffect from 'use-deep-compare-effect';\n\nconst messages = defineMessages({\n  thisItemIsLocked: {\n    id: 'This item was locked by {creator} on {date}',\n    defaultMessage: 'This item was locked by {creator} on {date}',\n  },\n  unlockItem: {\n    id:\n      'If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.',\n    defaultMessage:\n      'If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.',\n  },\n});\n\nconst LockingToastsFactory = (props) => {\n  const intl = useIntl();\n  const pathname = useLocation().pathname;\n  const lang = useSelector((state) => state.intl.locale);\n  const { content, user } = props;\n  const lock = content?.lock;\n  const creator = lock?.creator_name || lock?.creator || '';\n  const date = lock?.created || '';\n  const dateOptions = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n  };\n\n  useDeepCompareEffect(() => {\n    if (user && content) {\n      if (lock?.locked && lock?.stealable && lock?.creator !== user) {\n        if (toast.isActive('lockinginfo')) {\n          toast.update('lockinginfo', {\n            render: (\n              <Toast\n                info\n                title={intl.formatMessage(messages.thisItemIsLocked, {\n                  creator: creator,\n                  date: <FormattedDate date={date} format={dateOptions} />,\n                })}\n                content={intl.formatMessage(messages.unlockItem, {})}\n              />\n            ),\n          });\n        } else {\n          toast.info(\n            <Toast\n              info\n              title={intl.formatMessage(messages.thisItemIsLocked, {\n                creator: creator,\n                date: <FormattedDate date={date} format={dateOptions} />,\n              })}\n              content={intl.formatMessage(messages.unlockItem, {})}\n            />,\n            {\n              toastId: 'lockinginfo',\n              autoClose: false,\n              closeButton: false,\n              transition: null,\n            },\n          );\n        }\n      } else {\n        if (toast.isActive('lockinginfo')) {\n          toast.dismiss('lockinginfo');\n        }\n      }\n    }\n  }, [content, creator, date, dateOptions, intl, lang, lock, pathname, user]);\n\n  return null;\n};\n\nexport default LockingToastsFactory;\n"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,cAAT,EAAyBC,OAAzB,QAAwC,YAAxC;AACA,SAASC,aAAT,EAAwBC,KAAxB,QAAqC,yBAArC;AACA,OAAOC,oBAAP,MAAiC,yBAAjC;AAEA,MAAMC,QAAQ,GAAGL,cAAc,CAAC;EAC9BM,gBAAgB;IAAA;IAAA;EAAA,CADc;EAK9BC,UAAU;IAAA;IAAA;EAAA;AALoB,CAAD,CAA/B;;AAaA,MAAMC,oBAAoB,GAAIC,KAAD,IAAW;EAAA;;EACtC,MAAMC,IAAI,GAAGT,OAAO,EAApB;EACA,MAAMU,QAAQ,GAAGZ,WAAW,GAAGY,QAA/B;EACA,MAAMC,IAAI,GAAGd,WAAW,CAAEe,KAAD,IAAWA,KAAK,CAACH,IAAN,CAAWI,MAAvB,CAAxB;EACA,MAAM;IAAEC,OAAF;IAAWC;EAAX,IAAoBP,KAA1B;EACA,MAAMQ,IAAI,GAAGF,OAAH,aAAGA,OAAH,uBAAGA,OAAO,CAAEE,IAAtB;EACA,MAAMC,OAAO,GAAG,CAAAD,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEE,YAAN,MAAsBF,IAAtB,aAAsBA,IAAtB,uBAAsBA,IAAI,CAAEC,OAA5B,KAAuC,EAAvD;EACA,MAAME,IAAI,GAAG,CAAAH,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEI,OAAN,KAAiB,EAA9B;EACA,MAAMC,WAAW,GAAG;IAClBC,IAAI,EAAE,SADY;IAElBC,KAAK,EAAE,MAFW;IAGlBC,GAAG,EAAE,SAHa;IAIlBC,IAAI,EAAE,SAJY;IAKlBC,MAAM,EAAE;EALU,CAApB;EAQAvB,oBAAoB,CAAC,MAAM;IACzB,IAAIY,IAAI,IAAID,OAAZ,EAAqB;MACnB,IAAIE,IAAI,SAAJ,IAAAA,IAAI,WAAJ,IAAAA,IAAI,CAAEW,MAAN,IAAgBX,IAAhB,aAAgBA,IAAhB,eAAgBA,IAAI,CAAEY,SAAtB,IAAmC,CAAAZ,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEC,OAAN,MAAkBF,IAAzD,EAA+D;QAC7D,IAAInB,KAAK,CAACiC,QAAN,CAAe,aAAf,CAAJ,EAAmC;UACjCjC,KAAK,CAACkC,MAAN,CAAa,aAAb,EAA4B;YAC1BC,MAAM,EACJ,MAAC,KAAD;cACE,IAAI,MADN;cAEE,KAAK,EAAEtB,IAAI,CAACuB,aAAL,CAAmB5B,QAAQ,CAACC,gBAA5B,EAA8C;gBACnDY,OAAO,EAAEA,OAD0C;gBAEnDE,IAAI,EAAE,MAAC,aAAD;kBAAe,IAAI,EAAEA,IAArB;kBAA2B,MAAM,EAAEE,WAAnC;kBAAA;kBAAA;oBAAA;oBAAA;oBAAA;kBAAA;gBAAA;cAF6C,CAA9C,CAFT;cAME,OAAO,EAAEZ,IAAI,CAACuB,aAAL,CAAmB5B,QAAQ,CAACE,UAA5B,EAAwC,EAAxC,CANX;cAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YAAA;UAFwB,CAA5B;QAYD,CAbD,MAaO;UACLV,KAAK,CAACqC,IAAN,CACE,MAAC,KAAD;YACE,IAAI,MADN;YAEE,KAAK,EAAExB,IAAI,CAACuB,aAAL,CAAmB5B,QAAQ,CAACC,gBAA5B,EAA8C;cACnDY,OAAO,EAAEA,OAD0C;cAEnDE,IAAI,EAAE,MAAC,aAAD;gBAAe,IAAI,EAAEA,IAArB;gBAA2B,MAAM,EAAEE,WAAnC;gBAAA;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA;cAAA;YAF6C,CAA9C,CAFT;YAME,OAAO,EAAEZ,IAAI,CAACuB,aAAL,CAAmB5B,QAAQ,CAACE,UAA5B,EAAwC,EAAxC,CANX;YAAA;YAAA;cAAA;cAAA;cAAA;YAAA;UAAA,EADF,EASE;YACE4B,OAAO,EAAE,aADX;YAEEC,SAAS,EAAE,KAFb;YAGEC,WAAW,EAAE,KAHf;YAIEC,UAAU,EAAE;UAJd,CATF;QAgBD;MACF,CAhCD,MAgCO;QACL,IAAIzC,KAAK,CAACiC,QAAN,CAAe,aAAf,CAAJ,EAAmC;UACjCjC,KAAK,CAAC0C,OAAN,CAAc,aAAd;QACD;MACF;IACF;EACF,CAxCmB,EAwCjB,CAACxB,OAAD,EAAUG,OAAV,EAAmBE,IAAnB,EAAyBE,WAAzB,EAAsCZ,IAAtC,EAA4CE,IAA5C,EAAkDK,IAAlD,EAAwDN,QAAxD,EAAkEK,IAAlE,CAxCiB,CAApB;EA0CA,OAAO,IAAP;AACD,CA3DD;;GAAMR,oB;UACSP,O,EACIF,W,EACJD,W,EAabM,oB;;;KAhBII,oB;AA6DN,eAAeA,oBAAf"},"metadata":{"react-intl":{"messages":[{"id":"This item was locked by {creator} on {date}","defaultMessage":"This item was locked by {creator} on {date}"},{"id":"If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.","defaultMessage":"If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it."}]}},"sourceType":"module"}