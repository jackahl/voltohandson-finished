{"ast":null,"code":"import _defineProperty from \"/home/jakob/workspace/training-project/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _keys from \"lodash/keys\";\nimport _map from \"lodash/map\";\nvar _jsxFileName = \"/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/Preferences/PersonalPreferences.jsx\";\nvar __jsx = React.createElement;\n\n/**\n * Personal preferences component.\n * @module components/manage/Preferences/PersonalPreferences\n */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withCookies } from 'react-cookie';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { toast } from 'react-toastify';\nimport { Form, Toast } from '@plone/volto/components';\nimport languages from '@plone/volto/constants/Languages';\nimport { changeLanguage } from '@plone/volto/actions';\nimport { normalizeLanguageName } from '@plone/volto/helpers';\nimport config from '@plone/volto/registry';\nconst messages = defineMessages({\n  personalPreferences: {\n    \"id\": \"Personal Preferences\",\n    \"defaultMessage\": \"Personal Preferences\"\n  },\n  default: {\n    \"id\": \"Default\",\n    \"defaultMessage\": \"Default\"\n  },\n  language: {\n    \"id\": \"Language\",\n    \"defaultMessage\": \"Language\"\n  },\n  languageDescription: {\n    \"id\": \"Your preferred language\",\n    \"defaultMessage\": \"Your preferred language\"\n  },\n  saved: {\n    \"id\": \"Changes saved\",\n    \"defaultMessage\": \"Changes saved\"\n  },\n  back: {\n    \"id\": \"Back\",\n    \"defaultMessage\": \"Back\"\n  },\n  success: {\n    \"id\": \"Success\",\n    \"defaultMessage\": \"Success\"\n  }\n});\n/**\n * PersonalPreferences class.\n * @class PersonalPreferences\n * @extends Component\n */\n\nclass PersonalPreferences extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs PersonalPreferences\n   */\n  constructor(props) {\n    super(props);\n    this.onCancel = this.onCancel.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n  /**\n   * Submit handler\n   * @method onSubmit\n   * @param {object} data Form data.\n   * @returns {undefined}\n   */\n\n\n  onSubmit(data) {\n    let language = data.language || 'en';\n\n    if (config.settings.supportedLanguages.includes(language)) {\n      const langFileName = normalizeLanguageName(language);\n      import('@root/../locales/' + langFileName + '.json').then(locale => {\n        this.props.changeLanguage(language, locale.default);\n      });\n    }\n\n    toast.success(__jsx(Toast, {\n      success: true,\n      title: this.props.intl.formatMessage(messages.saved),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }));\n    this.props.closeMenu();\n  }\n  /**\n   * Cancel handler\n   * @method onCancel\n   * @returns {undefined}\n   */\n\n\n  onCancel() {\n    this.props.closeMenu();\n  }\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n\n\n  render() {\n    const {\n      cookies\n    } = this.props;\n    return __jsx(Form, {\n      formData: {\n        language: cookies.get('I18N_LANGUAGE') || ''\n      },\n      schema: {\n        fieldsets: [{\n          id: 'default',\n          title: this.props.intl.formatMessage(messages.default),\n          fields: ['language']\n        }],\n        properties: {\n          language: {\n            description: this.props.intl.formatMessage(messages.languageDescription),\n            title: this.props.intl.formatMessage(messages.language),\n            type: 'string',\n            choices: _map(_keys(languages), lang => [lang, languages[lang]])\n          }\n        },\n        required: []\n      },\n      onSubmit: this.onSubmit,\n      onCancel: this.onCancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 7\n      }\n    });\n  }\n\n}\n\n_defineProperty(PersonalPreferences, \"propTypes\", {\n  changeLanguage: PropTypes.func.isRequired,\n  closeMenu: PropTypes.func.isRequired\n});\n\nexport default compose(injectIntl, withCookies, connect(null, {\n  changeLanguage\n}))(PersonalPreferences);","map":{"version":3,"names":["React","Component","PropTypes","connect","compose","withCookies","defineMessages","injectIntl","toast","Form","Toast","languages","changeLanguage","normalizeLanguageName","config","messages","personalPreferences","default","language","languageDescription","saved","back","success","PersonalPreferences","constructor","props","onCancel","bind","onSubmit","data","settings","supportedLanguages","includes","langFileName","then","locale","intl","formatMessage","closeMenu","render","cookies","get","fieldsets","id","title","fields","properties","description","type","choices","lang","required","func","isRequired"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/Preferences/PersonalPreferences.jsx"],"sourcesContent":["/**\n * Personal preferences component.\n * @module components/manage/Preferences/PersonalPreferences\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { map, keys } from 'lodash';\nimport { withCookies } from 'react-cookie';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { toast } from 'react-toastify';\n\nimport { Form, Toast } from '@plone/volto/components';\nimport languages from '@plone/volto/constants/Languages';\nimport { changeLanguage } from '@plone/volto/actions';\nimport { normalizeLanguageName } from '@plone/volto/helpers';\nimport config from '@plone/volto/registry';\n\nconst messages = defineMessages({\n  personalPreferences: {\n    id: 'Personal Preferences',\n    defaultMessage: 'Personal Preferences',\n  },\n  default: {\n    id: 'Default',\n    defaultMessage: 'Default',\n  },\n  language: {\n    id: 'Language',\n    defaultMessage: 'Language',\n  },\n  languageDescription: {\n    id: 'Your preferred language',\n    defaultMessage: 'Your preferred language',\n  },\n  saved: {\n    id: 'Changes saved',\n    defaultMessage: 'Changes saved',\n  },\n  back: {\n    id: 'Back',\n    defaultMessage: 'Back',\n  },\n  success: {\n    id: 'Success',\n    defaultMessage: 'Success',\n  },\n});\n\n/**\n * PersonalPreferences class.\n * @class PersonalPreferences\n * @extends Component\n */\nclass PersonalPreferences extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n  static propTypes = {\n    changeLanguage: PropTypes.func.isRequired,\n    closeMenu: PropTypes.func.isRequired,\n  };\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs PersonalPreferences\n   */\n  constructor(props) {\n    super(props);\n    this.onCancel = this.onCancel.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  /**\n   * Submit handler\n   * @method onSubmit\n   * @param {object} data Form data.\n   * @returns {undefined}\n   */\n  onSubmit(data) {\n    let language = data.language || 'en';\n    if (config.settings.supportedLanguages.includes(language)) {\n      const langFileName = normalizeLanguageName(language);\n      import('@root/../locales/' + langFileName + '.json').then((locale) => {\n        this.props.changeLanguage(language, locale.default);\n      });\n    }\n    toast.success(\n      <Toast success title={this.props.intl.formatMessage(messages.saved)} />,\n    );\n    this.props.closeMenu();\n  }\n\n  /**\n   * Cancel handler\n   * @method onCancel\n   * @returns {undefined}\n   */\n  onCancel() {\n    this.props.closeMenu();\n  }\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    const { cookies } = this.props;\n    return (\n      <Form\n        formData={{ language: cookies.get('I18N_LANGUAGE') || '' }}\n        schema={{\n          fieldsets: [\n            {\n              id: 'default',\n              title: this.props.intl.formatMessage(messages.default),\n              fields: ['language'],\n            },\n          ],\n          properties: {\n            language: {\n              description: this.props.intl.formatMessage(\n                messages.languageDescription,\n              ),\n              title: this.props.intl.formatMessage(messages.language),\n              type: 'string',\n              choices: map(keys(languages), (lang) => [lang, languages[lang]]),\n            },\n          },\n          required: [],\n        }}\n        onSubmit={this.onSubmit}\n        onCancel={this.onCancel}\n      />\n    );\n  }\n}\n\nexport default compose(\n  injectIntl,\n  withCookies,\n  connect(null, { changeLanguage }),\n)(PersonalPreferences);\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[{"id":"Personal Preferences","defaultMessage":"Personal Preferences"},{"id":"Default","defaultMessage":"Default"},{"id":"Language","defaultMessage":"Language"},{"id":"Your preferred language","defaultMessage":"Your preferred language"},{"id":"Changes saved","defaultMessage":"Changes saved"},{"id":"Back","defaultMessage":"Back"},{"id":"Success","defaultMessage":"Success"}]}},"sourceType":"module"}