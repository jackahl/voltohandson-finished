{"ast":null,"code":"import _extends from \"/home/jakob/workspace/training-project/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"/home/jakob/workspace/training-project/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/Sidebar/ObjectBrowser.jsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport ObjectBrowserBody from '@plone/volto/components/manage/Sidebar/ObjectBrowserBody';\nimport SidebarPopup from '@plone/volto/components/manage/Sidebar/SidebarPopup';\nimport { getBaseUrl } from '@plone/volto/helpers';\n\nconst withObjectBrowser = WrappedComponent => {\n  var _class;\n\n  return _class = class extends React.Component {\n    /**\n     * Default properties\n     * @property {Object} defaultProps Default properties.\n     * @static\n     */\n    constructor() {\n      var _this;\n\n      super();\n      _this = this;\n\n      _defineProperty(this, \"openObjectBrowser\", function () {\n        let {\n          mode = 'image',\n          onSelectItem = null,\n          dataName = null,\n          overlay = null,\n          propDataName = null,\n          selectableTypes,\n          maximumSelectionSize,\n          currentPath\n        } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return _this.setState(() => ({\n          isObjectBrowserOpen: true,\n          mode,\n          onSelectItem,\n          dataName,\n          overlay,\n          propDataName,\n          selectableTypes,\n          maximumSelectionSize,\n          currentPath\n        }));\n      });\n\n      _defineProperty(this, \"closeObjectBrowser\", () => this.setState({\n        isObjectBrowserOpen: false\n      }));\n\n      this.state = {\n        isObjectBrowserOpen: false\n      };\n    }\n    /**\n     * openObjectBrowser\n     * @function openObjectBrowser\n     * @param {Object} object ObjectBrowser configuration.\n     * @param {string} object.mode Quick mode, defaults to `image`. Values: link, image, multiple\n     * @param {string} object.dataName Name of the block data property to write the selected item.\n     * @param {string} object.onSelectItem Function that will be called on item selection.\n     * @param {string} object.overlay Boolean to show overlay background on content when opening objectBrowser.\n     *\n     * Usage:\n     *\n     * this.props.openObjectBrowser();\n     *\n     * this.props.openObjectBrowser({mode: 'link'});\n     *\n     * this.props.openObjectBrowser({\n     *   dataName: 'myfancydatafield'\n     *   });\n     *\n     * this.props.openObjectBrowser({\n     *   onSelectItem: url =>\n     *     this.props.onChangeBlock(this.props.block, {\n     *       ...this.props.data,\n     *       myfancydatafield: url,\n     *     }),\n     *   });\n     */\n\n\n    render() {\n      var _this$props$location, _this$state;\n\n      let contextURL = this.props.pathname || ((_this$props$location = this.props.location) === null || _this$props$location === void 0 ? void 0 : _this$props$location.pathname) || ((_this$state = this.state) === null || _this$state === void 0 ? void 0 : _this$state.currentPath);\n      return __jsx(React.Fragment, null, __jsx(WrappedComponent, _extends({}, this.props, {\n        isObjectBrowserOpen: this.state.isObjectBrowserOpen,\n        openObjectBrowser: this.openObjectBrowser,\n        closeObjectBrowser: this.closeObjectBrowser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }\n      })), __jsx(React.Fragment, null, __jsx(SidebarPopup, {\n        open: this.state.isObjectBrowserOpen,\n        onClose: this.closeObjectBrowser,\n        overlay: this.state.overlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }\n      }, __jsx(ObjectBrowserBody, _extends({}, this.props, {\n        data: this.state.propDataName ? this.props[this.state.propDataName] : this.props.data,\n        contextURL: getBaseUrl(contextURL),\n        closeObjectBrowser: this.closeObjectBrowser,\n        mode: this.state.mode,\n        onSelectItem: this.state.onSelectItem,\n        dataName: this.state.dataName,\n        selectableTypes: this.state.selectableTypes,\n        maximumSelectionSize: this.state.maximumSelectionSize,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }\n      })))));\n    }\n\n  }, _defineProperty(_class, \"defaultProps\", {\n    onChangeBlock: () => {},\n    data: {},\n    block: new Date().getTime() + ''\n  }), _class;\n};\n\nexport default withObjectBrowser;","map":{"version":3,"names":["React","ObjectBrowserBody","SidebarPopup","getBaseUrl","withObjectBrowser","WrappedComponent","Component","constructor","mode","onSelectItem","dataName","overlay","propDataName","selectableTypes","maximumSelectionSize","currentPath","setState","isObjectBrowserOpen","state","render","contextURL","props","pathname","location","openObjectBrowser","closeObjectBrowser","data","onChangeBlock","block","Date","getTime"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/Sidebar/ObjectBrowser.jsx"],"sourcesContent":["import React from 'react';\nimport ObjectBrowserBody from '@plone/volto/components/manage/Sidebar/ObjectBrowserBody';\nimport SidebarPopup from '@plone/volto/components/manage/Sidebar/SidebarPopup';\nimport { getBaseUrl } from '@plone/volto/helpers';\n\nconst withObjectBrowser = (WrappedComponent) =>\n  class extends React.Component {\n    /**\n     * Default properties\n     * @property {Object} defaultProps Default properties.\n     * @static\n     */\n    static defaultProps = {\n      onChangeBlock: () => {},\n      data: {},\n      block: new Date().getTime() + '',\n    };\n\n    constructor() {\n      super();\n      this.state = { isObjectBrowserOpen: false };\n    }\n\n    /**\n     * openObjectBrowser\n     * @function openObjectBrowser\n     * @param {Object} object ObjectBrowser configuration.\n     * @param {string} object.mode Quick mode, defaults to `image`. Values: link, image, multiple\n     * @param {string} object.dataName Name of the block data property to write the selected item.\n     * @param {string} object.onSelectItem Function that will be called on item selection.\n     * @param {string} object.overlay Boolean to show overlay background on content when opening objectBrowser.\n     *\n     * Usage:\n     *\n     * this.props.openObjectBrowser();\n     *\n     * this.props.openObjectBrowser({mode: 'link'});\n     *\n     * this.props.openObjectBrowser({\n     *   dataName: 'myfancydatafield'\n     *   });\n     *\n     * this.props.openObjectBrowser({\n     *   onSelectItem: url =>\n     *     this.props.onChangeBlock(this.props.block, {\n     *       ...this.props.data,\n     *       myfancydatafield: url,\n     *     }),\n     *   });\n     */\n    openObjectBrowser = ({\n      mode = 'image',\n      onSelectItem = null,\n      dataName = null,\n      overlay = null,\n      propDataName = null,\n      selectableTypes,\n      maximumSelectionSize,\n      currentPath,\n    } = {}) =>\n      this.setState(() => ({\n        isObjectBrowserOpen: true,\n        mode,\n        onSelectItem,\n        dataName,\n        overlay,\n        propDataName,\n        selectableTypes,\n        maximumSelectionSize,\n        currentPath,\n      }));\n\n    closeObjectBrowser = () => this.setState({ isObjectBrowserOpen: false });\n\n    render() {\n      let contextURL =\n        this.props.pathname ||\n        this.props.location?.pathname ||\n        this.state?.currentPath;\n\n      return (\n        <>\n          <WrappedComponent\n            {...this.props}\n            isObjectBrowserOpen={this.state.isObjectBrowserOpen}\n            openObjectBrowser={this.openObjectBrowser}\n            closeObjectBrowser={this.closeObjectBrowser}\n          />\n\n          <>\n            <SidebarPopup\n              open={this.state.isObjectBrowserOpen}\n              onClose={this.closeObjectBrowser}\n              overlay={this.state.overlay}\n            >\n              <ObjectBrowserBody\n                {...this.props}\n                data={\n                  this.state.propDataName\n                    ? this.props[this.state.propDataName]\n                    : this.props.data\n                }\n                contextURL={getBaseUrl(contextURL)}\n                closeObjectBrowser={this.closeObjectBrowser}\n                mode={this.state.mode}\n                onSelectItem={this.state.onSelectItem}\n                dataName={this.state.dataName}\n                selectableTypes={this.state.selectableTypes}\n                maximumSelectionSize={this.state.maximumSelectionSize}\n              />\n            </SidebarPopup>\n          </>\n        </>\n      );\n    }\n  };\n\nexport default withObjectBrowser;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}