{"ast":null,"code":"import decorateComponentWithProps from 'decorate-component-with-props';\nimport DefaultLink from './components/Link';\nimport LinkButton from './components/LinkButton';\nimport linkStrategy, { matchesEntityType } from './linkStrategy';\n\nfunction unboundRemoveEntity(editorState) {\n  const contentState = editorState.getCurrentContent();\n  const selectionState = editorState.getSelection();\n  const startKey = selectionState.getStartKey();\n  const contentBlock = contentState.getBlockForKey(startKey);\n  const startOffset = selectionState.getStartOffset();\n  const entity = contentBlock.getEntityAt(startOffset);\n\n  if (!entity) {\n    return editorState;\n  }\n\n  let entitySelection = null;\n  contentBlock.findEntityRanges(character => character.getEntity() === entity, (start, end) => {\n    entitySelection = selectionState.merge({\n      anchorOffset: start,\n      focusOffset: end,\n      isBackward: false\n    });\n  });\n  const newContentState = this.Modifier.applyEntity(contentState, entitySelection, null);\n  const newEditorState = this.EditorState.push(editorState, newContentState, 'apply-entity');\n  return newEditorState;\n}\n\nexport default (function () {\n  let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  // ToDo: Get rif of the remainings of having the original CSS modules\n  const defaultTheme = {};\n  const {\n    theme = defaultTheme,\n    placeholder,\n    Link,\n    linkTarget,\n    libraries\n  } = config;\n  const removeEntity = unboundRemoveEntity.bind(libraries);\n  return {\n    decorators: [{\n      strategy: linkStrategy,\n      matchesEntityType,\n      component: Link || decorateComponentWithProps(DefaultLink, {\n        className: 'link-anchorlink-theme',\n        target: linkTarget\n      })\n    }],\n    LinkButton: decorateComponentWithProps(LinkButton, {\n      ownTheme: theme,\n      placeholder,\n      onRemoveLinkAtSelection: (setEditorState, getEditorState) => setEditorState(removeEntity(getEditorState()))\n    })\n  };\n});","map":{"version":3,"names":["decorateComponentWithProps","DefaultLink","LinkButton","linkStrategy","matchesEntityType","unboundRemoveEntity","editorState","contentState","getCurrentContent","selectionState","getSelection","startKey","getStartKey","contentBlock","getBlockForKey","startOffset","getStartOffset","entity","getEntityAt","entitySelection","findEntityRanges","character","getEntity","start","end","merge","anchorOffset","focusOffset","isBackward","newContentState","Modifier","applyEntity","newEditorState","EditorState","push","config","defaultTheme","theme","placeholder","Link","linkTarget","libraries","removeEntity","bind","decorators","strategy","component","className","target","ownTheme","onRemoveLinkAtSelection","setEditorState","getEditorState"],"sources":["/home/jakob/workspace/training-project/node_modules/@plone/volto/src/components/manage/AnchorPlugin/index.jsx"],"sourcesContent":["import decorateComponentWithProps from 'decorate-component-with-props';\n\nimport DefaultLink from './components/Link';\nimport LinkButton from './components/LinkButton';\nimport linkStrategy, { matchesEntityType } from './linkStrategy';\n\nfunction unboundRemoveEntity(editorState) {\n  const contentState = editorState.getCurrentContent();\n  const selectionState = editorState.getSelection();\n  const startKey = selectionState.getStartKey();\n  const contentBlock = contentState.getBlockForKey(startKey);\n  const startOffset = selectionState.getStartOffset();\n  const entity = contentBlock.getEntityAt(startOffset);\n\n  if (!entity) {\n    return editorState;\n  }\n\n  let entitySelection = null;\n\n  contentBlock.findEntityRanges(\n    (character) => character.getEntity() === entity,\n    (start, end) => {\n      entitySelection = selectionState.merge({\n        anchorOffset: start,\n        focusOffset: end,\n        isBackward: false,\n      });\n    },\n  );\n\n  const newContentState = this.Modifier.applyEntity(\n    contentState,\n    entitySelection,\n    null,\n  );\n\n  const newEditorState = this.EditorState.push(\n    editorState,\n    newContentState,\n    'apply-entity',\n  );\n\n  return newEditorState;\n}\n\nexport default (config = {}) => {\n  // ToDo: Get rif of the remainings of having the original CSS modules\n  const defaultTheme = {};\n\n  const {\n    theme = defaultTheme,\n    placeholder,\n    Link,\n    linkTarget,\n    libraries,\n  } = config;\n\n  const removeEntity = unboundRemoveEntity.bind(libraries);\n\n  return {\n    decorators: [\n      {\n        strategy: linkStrategy,\n        matchesEntityType,\n        component:\n          Link ||\n          decorateComponentWithProps(DefaultLink, {\n            className: 'link-anchorlink-theme',\n            target: linkTarget,\n          }),\n      },\n    ],\n\n    LinkButton: decorateComponentWithProps(LinkButton, {\n      ownTheme: theme,\n      placeholder,\n      onRemoveLinkAtSelection: (setEditorState, getEditorState) =>\n        setEditorState(removeEntity(getEditorState())),\n    }),\n  };\n};\n"],"mappings":"AAAA,OAAOA,0BAAP,MAAuC,+BAAvC;AAEA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,YAAP,IAAuBC,iBAAvB,QAAgD,gBAAhD;;AAEA,SAASC,mBAAT,CAA6BC,WAA7B,EAA0C;EACxC,MAAMC,YAAY,GAAGD,WAAW,CAACE,iBAAZ,EAArB;EACA,MAAMC,cAAc,GAAGH,WAAW,CAACI,YAAZ,EAAvB;EACA,MAAMC,QAAQ,GAAGF,cAAc,CAACG,WAAf,EAAjB;EACA,MAAMC,YAAY,GAAGN,YAAY,CAACO,cAAb,CAA4BH,QAA5B,CAArB;EACA,MAAMI,WAAW,GAAGN,cAAc,CAACO,cAAf,EAApB;EACA,MAAMC,MAAM,GAAGJ,YAAY,CAACK,WAAb,CAAyBH,WAAzB,CAAf;;EAEA,IAAI,CAACE,MAAL,EAAa;IACX,OAAOX,WAAP;EACD;;EAED,IAAIa,eAAe,GAAG,IAAtB;EAEAN,YAAY,CAACO,gBAAb,CACGC,SAAD,IAAeA,SAAS,CAACC,SAAV,OAA0BL,MAD3C,EAEE,CAACM,KAAD,EAAQC,GAAR,KAAgB;IACdL,eAAe,GAAGV,cAAc,CAACgB,KAAf,CAAqB;MACrCC,YAAY,EAAEH,KADuB;MAErCI,WAAW,EAAEH,GAFwB;MAGrCI,UAAU,EAAE;IAHyB,CAArB,CAAlB;EAKD,CARH;EAWA,MAAMC,eAAe,GAAG,KAAKC,QAAL,CAAcC,WAAd,CACtBxB,YADsB,EAEtBY,eAFsB,EAGtB,IAHsB,CAAxB;EAMA,MAAMa,cAAc,GAAG,KAAKC,WAAL,CAAiBC,IAAjB,CACrB5B,WADqB,EAErBuB,eAFqB,EAGrB,cAHqB,CAAvB;EAMA,OAAOG,cAAP;AACD;;AAED,gBAAe,YAAiB;EAAA,IAAhBG,MAAgB,uEAAP,EAAO;EAC9B;EACA,MAAMC,YAAY,GAAG,EAArB;EAEA,MAAM;IACJC,KAAK,GAAGD,YADJ;IAEJE,WAFI;IAGJC,IAHI;IAIJC,UAJI;IAKJC;EALI,IAMFN,MANJ;EAQA,MAAMO,YAAY,GAAGrC,mBAAmB,CAACsC,IAApB,CAAyBF,SAAzB,CAArB;EAEA,OAAO;IACLG,UAAU,EAAE,CACV;MACEC,QAAQ,EAAE1C,YADZ;MAEEC,iBAFF;MAGE0C,SAAS,EACPP,IAAI,IACJvC,0BAA0B,CAACC,WAAD,EAAc;QACtC8C,SAAS,EAAE,uBAD2B;QAEtCC,MAAM,EAAER;MAF8B,CAAd;IAL9B,CADU,CADP;IAcLtC,UAAU,EAAEF,0BAA0B,CAACE,UAAD,EAAa;MACjD+C,QAAQ,EAAEZ,KADuC;MAEjDC,WAFiD;MAGjDY,uBAAuB,EAAE,CAACC,cAAD,EAAiBC,cAAjB,KACvBD,cAAc,CAACT,YAAY,CAACU,cAAc,EAAf,CAAb;IAJiC,CAAb;EAdjC,CAAP;AAqBD,CAnCD"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}